"use strict";(self.webpackChunkgame_tavern=self.webpackChunkgame_tavern||[]).push([[695],{56752:(T,m,t)=>{t.r(m),t.d(m,{SettingsPage:()=>I,default:()=>Z});var e=t(67294),i=t(40720),f=t(90731),p=t(12473),E=t(34726),x=t(71590),s=t(96987),v=t(16607),b=t(10574),j=t(31988),y=t(6498),D=t(17705),n=t(80621),o=t(18226),r=t(52861),l=t(18446),d=t.n(l),u=t(64593),C=t(86896),S=t(11727),c=t(63955);const A=a=>a;var N=t(18172),W=t(36968),H=t.n(W);const G={isLoading:!0,isSubmiting:!1,initialData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1},modifiedData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1}},K=(a,O)=>(0,N.default)(a,g=>{switch(O.type){case"CANCEL_CHANGES":{g.modifiedData=a.initialData;break}case"GET_DATA_SUCCEEDED":{g.isLoading=!1,g.initialData=O.data,g.modifiedData=O.data;break}case"ON_CHANGE":{H()(g,["modifiedData",...O.keys.split(".")],O.value);break}case"ON_SUBMIT":{g.isSubmiting=!0;break}case"SUBMIT_SUCCEEDED":{g.initialData=a.modifiedData,g.isSubmiting=!1;break}case"ON_SUBMIT_ERROR":{g.isSubmiting=!1;break}default:return a}}),I=()=>{const{formatMessage:a}=(0,C.Z)(),{lockApp:O,unlockApp:g}=(0,n.useOverlayBlocker)(),F=(0,n.useNotification)(),{get:$,put:V}=(0,n.useFetchClient)();(0,n.useFocusWhenNavigate)();const[{initialData:X,isLoading:J,isSubmiting:Q,modifiedData:B},L]=(0,e.useReducer)(K,G,A),k=(0,e.useRef)(!0);(0,e.useEffect)(()=>{const M=r.default.CancelToken.source(),w=async()=>{try{const{data:{data:z}}=await $("/upload/settings",{cancelToken:M.token});L({type:"GET_DATA_SUCCEEDED",data:z})}catch(z){console.error(z)}};return k.current&&w(),()=>{M.cancel("Operation canceled by the user."),k.current=!1}},[]);const U=d()(X,B),Y=async h=>{if(h.preventDefault(),!U){O(),L({type:"ON_SUBMIT"});try{await V("/upload/settings",B),L({type:"SUBMIT_SUCCEEDED"}),F({type:"success",message:{id:"notification.form.success.fields"}})}catch(M){console.error(M),L({type:"ON_SUBMIT_ERROR"})}g()}},R=({target:{name:h,value:M}})=>{L({type:"ON_CHANGE",keys:h,value:M})};return e.createElement(i.o,{tabIndex:-1},e.createElement(u.q,{title:a({id:(0,c.OB)("page.title"),defaultMessage:"Settings - Media Libray"})}),e.createElement("form",{onSubmit:Y},e.createElement(f.T,{title:a({id:(0,c.OB)("settings.header.label"),defaultMessage:"Media Library"}),primaryAction:e.createElement(p.z,{disabled:U,"data-testid":"save-button",loading:Q,type:"submit",startIcon:e.createElement(o.Z,null),size:"S"},a({id:"global.save",defaultMessage:"Save"})),subtitle:a({id:(0,c.OB)("settings.sub-header.label"),defaultMessage:"Configure the settings for the Media Library"})}),e.createElement(E.D,null,J?e.createElement(n.LoadingIndicatorPage,null):e.createElement(x.A,null,e.createElement(s.k,{direction:"column",alignItems:"stretch",gap:12},e.createElement(v.x,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(s.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(s.k,null,e.createElement(b.Z,{variant:"delta",as:"h2"},a({id:(0,c.OB)("settings.blockTitle"),defaultMessage:"Asset management"}))),e.createElement(j.r,{gap:6},e.createElement(y.P,{col:6,s:12},e.createElement(D.s,{"aria-label":"responsiveDimensions","data-testid":"responsiveDimensions",checked:B.responsiveDimensions,hint:a({id:(0,c.OB)("settings.form.responsiveDimensions.description"),defaultMessage:"Enabling this option will generate multiple formats (small, medium and large) of the uploaded asset."}),label:a({id:(0,c.OB)("settings.form.responsiveDimensions.label"),defaultMessage:"Responsive friendly upload"}),name:"responsiveDimensions",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:h=>{R({target:{name:"responsiveDimensions",value:h.target.checked}})}})),e.createElement(y.P,{col:6,s:12},e.createElement(D.s,{"aria-label":"sizeOptimization","data-testid":"sizeOptimization",checked:B.sizeOptimization,hint:a({id:(0,c.OB)("settings.form.sizeOptimization.description"),defaultMessage:"Enabling this option will reduce the image size and slightly reduce its quality."}),label:a({id:(0,c.OB)("settings.form.sizeOptimization.label"),defaultMessage:"Size optimization"}),name:"sizeOptimization",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:h=>{R({target:{name:"sizeOptimization",value:h.target.checked}})}})),e.createElement(y.P,{col:6,s:12},e.createElement(D.s,{"aria-label":"autoOrientation","data-testid":"autoOrientation",checked:B.autoOrientation,hint:a({id:(0,c.OB)("settings.form.autoOrientation.description"),defaultMessage:"Enabling this option will automatically rotate the image according to EXIF orientation tag."}),label:a({id:(0,c.OB)("settings.form.autoOrientation.label"),defaultMessage:"Auto orientation"}),name:"autoOrientation",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:h=>{R({target:{name:"autoOrientation",value:h.target.checked}})}}))))))))))},Z=()=>e.createElement(n.CheckPagePermissions,{permissions:S._I.settings},e.createElement(I,null))},34726:(T,m,t)=>{t.d(m,{D:()=>f});var e=t(85893),i=t(16607);const f=({children:p})=>(0,e.jsx)(i.x,{paddingLeft:10,paddingRight:10,children:p})},90731:(T,m,t)=>{t.d(m,{T:()=>j});var e=t(85893),i=t(67294),f=t(54863);const p=n=>{const o=(0,i.useRef)(null),[r,l]=(0,i.useState)(!0),d=([u])=>{l(u.isIntersecting)};return(0,i.useEffect)(()=>{const u=o.current,C=new IntersectionObserver(d,n);return u&&C.observe(o.current),()=>{u&&C.disconnect()}},[o,n]),[o,r]};var E=t(79698);const x=(n,o)=>{const r=(0,E.W)(o);(0,i.useLayoutEffect)(()=>{const l=new ResizeObserver(r);return Array.isArray(n)?n.forEach(d=>{d.current&&l.observe(d.current)}):n.current&&l.observe(n.current),()=>{l.disconnect()}},[n,r])};var s=t(16607),v=t(96987),b=t(10574);const j=n=>{const o=(0,i.useRef)(null),[r,l]=(0,i.useState)(null),[d,u]=p({root:null,rootMargin:"0px",threshold:0});return x(d,()=>{d.current&&l(d.current.getBoundingClientRect())}),(0,i.useEffect)(()=>{o.current&&l(o.current.getBoundingClientRect())},[o]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:r?.height},ref:d,children:u&&(0,e.jsx)(D,{ref:o,...n})}),!u&&(0,e.jsx)(D,{...n,sticky:!0,width:r?.width})]})};j.displayName="HeaderLayout";const y=(0,f.default)(s.x)`
  width: ${({width:n})=>n?`${n/16}rem`:void 0};
  z-index: ${({theme:n})=>n.zIndices[1]};
`,D=i.forwardRef(({navigationAction:n,primaryAction:o,secondaryAction:r,subtitle:l,title:d,sticky:u,width:C,...S},c)=>{const P=typeof l=="string";return u?(0,e.jsx)(y,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:C,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(v.k,{justifyContent:"space-between",children:[(0,e.jsxs)(v.k,{children:[n&&(0,e.jsx)(s.x,{paddingRight:3,children:n}),(0,e.jsxs)(s.x,{children:[(0,e.jsx)(b.Z,{variant:"beta",as:"h1",...S,children:d}),P?(0,e.jsx)(b.Z,{variant:"pi",textColor:"neutral600",children:l}):l]}),r?(0,e.jsx)(s.x,{paddingLeft:4,children:r}):null]}),(0,e.jsx)(v.k,{children:o?(0,e.jsx)(s.x,{paddingLeft:2,children:o}):void 0})]})}):(0,e.jsxs)(s.x,{ref:c,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:n?6:8,background:"neutral100","data-strapi-header":!0,children:[n?(0,e.jsx)(s.x,{paddingBottom:2,children:n}):null,(0,e.jsxs)(v.k,{justifyContent:"space-between",children:[(0,e.jsxs)(v.k,{minWidth:0,children:[(0,e.jsx)(b.Z,{as:"h1",variant:"alpha",...S,children:d}),r?(0,e.jsx)(s.x,{paddingLeft:4,children:r}):null]}),o]}),P?(0,e.jsx)(b.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:l}):l]})})},71590:(T,m,t)=>{t.d(m,{A:()=>x});var e=t(85893),i=t(54863),f=t(16607);const p=(0,i.default)(f.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:s})=>s?"auto 1fr":"1fr"};
`,E=(0,i.default)(f.x)`
  overflow-x: hidden;
`,x=({sideNav:s,children:v})=>(0,e.jsxs)(p,{hasSideNav:Boolean(s),children:[s,(0,e.jsx)(E,{paddingBottom:10,children:v})]})},40720:(T,m,t)=>{t.d(m,{o:()=>E});var e=t(85893),i=t(54863),f=t(16607);const p=(0,i.default)(f.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,E=({labelledBy:x="main-content-title",...s})=>(0,e.jsx)(p,{"aria-labelledby":x,as:"main",id:"main-content",tabIndex:-1,...s})}}]);
