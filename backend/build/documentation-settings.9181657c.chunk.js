"use strict";(self.webpackChunkgame_tavern=self.webpackChunkgame_tavern||[]).push([[8503],{73972:(R,c,e)=>{e.d(c,{f:()=>D});var t=e(67294),a=e(80621),_=e(88767),f=e(52809),O=e(35326);const D=()=>{const o=(0,a.useNotification)(),{del:M,post:P,put:p,get:B}=(0,a.useFetchClient)(),{formatAPIError:h}=(0,a.useAPIErrorHandler)(),{isLoading:s,isError:n,data:i,refetch:d,error:r}=(0,_.useQuery)(["get-documentation",f.Z],async()=>{const{data:E}=await B(`/${f.Z}/getInfos`);return E});(0,t.useEffect)(()=>{n&&r&&o({type:"warning",message:r?h(r):{id:"notification.error"}})},[n,r,o,h]);const l=E=>{o({type:"warning",message:h(E)})},m=(E,u,T)=>{d(),o({type:E,message:{id:(0,O.Z)(u),defaultMessage:T}})},L=(0,_.useMutation)(({prefix:E,version:u})=>M(`${E}/deleteDoc/${u}`),{onSuccess:()=>m("info","notification.delete.success","Successfully deleted documentation"),onError:l}),v=(0,_.useMutation)(({prefix:E,body:u})=>p(`${E}/updateSettings`,u),{onSuccess:()=>m("success","notification.update.success","Successfully updated settings"),onError:l}),A=(0,_.useMutation)(({prefix:E,version:u})=>P(`${E}/regenerateDoc`,{version:u}),{onSuccess:()=>m("info","notification.generate.success","Successfully generated documentation"),onError:l});return{data:i,isLoading:s,isError:n,remove:L,submit:v,regenerate:A}}},50233:(R,c,e)=>{e.r(c),e.d(c,{default:()=>Z});var t=e(67294),a=e(40720),_=e(90731),f=e(12473),O=e(34726),D=e(16607),o=e(96987),M=e(10574),P=e(31988),p=e(6498),B=e(17705),h=e(38670),s=e(7659),n=e(80621),i=e(18226),d=e(81851),r=e(92795),l=e(41054),m=e(86896),L=e(54863),v=e(87561),A=e(12966),E=e(73972),u=e(10104);const T=v.Ry().shape({restrictedAccess:v.O7(),password:v.Z_().when("restrictedAccess",(g,x)=>g?x.required(n.translatedErrors.required):x)}),S=()=>{(0,n.useFocusWhenNavigate)();const{formatMessage:g}=(0,m.Z)(),{submit:x,data:y,isLoading:$}=(0,E.f)(),[I,w]=(0,t.useState)(!1),{allowedActions:z}=(0,n.useRBAC)(A._),F=W=>{x.mutate({prefix:y?.prefix,body:W})};return t.createElement(a.o,null,$?t.createElement(n.LoadingIndicatorPage,null,"Plugin settings are loading"):t.createElement(l.Formik,{initialValues:{restrictedAccess:y?.documentationAccess.restrictedAccess||!1,password:""},onSubmit:F,validationSchema:T},({handleSubmit:W,values:C,handleChange:b,errors:U,setFieldTouched:H,setFieldValue:K,dirty:N})=>t.createElement(n.Form,{noValidate:!0,onSubmit:W},t.createElement(_.T,{title:g({id:(0,u.O)("plugin.name"),defaultMessage:"Documentation"}),subtitle:g({id:(0,u.O)("pages.SettingsPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:t.createElement(f.z,{type:"submit",startIcon:t.createElement(i.Z,null),disabled:!N&&z.canUpdate},g({id:(0,u.O)("pages.SettingsPage.Button.save"),defaultMessage:"Save"}))}),t.createElement(O.D,null,t.createElement(D.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},t.createElement(o.k,{direction:"column",alignItems:"stretch",gap:4},t.createElement(M.Z,{variant:"delta",as:"h2"},g({id:"global.settings",defaultMessage:"Settings"})),t.createElement(P.r,{gap:4},t.createElement(p.P,{col:6,s:12},t.createElement(B.s,{name:"restrictedAccess",label:g({id:(0,u.O)("pages.SettingsPage.toggle.label"),defaultMessage:"Restricted Access"}),hint:g({id:(0,u.O)("pages.SettingsPage.toggle.hint"),defaultMessage:"Make the documentation endpoint private"}),checked:C.restrictedAccess,onChange:()=>{C.restrictedAccess===!0&&(K("password","",!1),H("password",!1,!1)),K("restrictedAccess",!C.restrictedAccess,!1)},onLabel:"On",offLabel:"Off"})),C.restrictedAccess&&t.createElement(p.P,{col:6,s:12},t.createElement(h.o,{label:g({id:"global.password",defaultMessage:"Password"}),name:"password",placeholder:"**********",type:I?"text":"password",value:C.password,onChange:b,error:U.password?g({id:U.password,defaultMessage:"Invalid value"}):null,endAction:t.createElement(j,{onClick:V=>{V.stopPropagation(),w(X=>!X)},label:g(I?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},I?t.createElement(d.Z,null):t.createElement(r.Z,null))})))))))))},j=(0,L.default)(s.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:g})=>g.colors.neutral600};
    }
  }
`,Z=S},35326:(R,c,e)=>{e.d(c,{Z:()=>_});var t=e(52809);const _=f=>`${t.Z}.${f}`},10104:(R,c,e)=>{e.d(c,{O:()=>t.Z});var t=e(35326)},34726:(R,c,e)=>{e.d(c,{D:()=>_});var t=e(85893),a=e(16607);const _=({children:f})=>(0,t.jsx)(a.x,{paddingLeft:10,paddingRight:10,children:f})},90731:(R,c,e)=>{e.d(c,{T:()=>p});var t=e(85893),a=e(67294),_=e(54863);const f=s=>{const n=(0,a.useRef)(null),[i,d]=(0,a.useState)(!0),r=([l])=>{d(l.isIntersecting)};return(0,a.useEffect)(()=>{const l=n.current,m=new IntersectionObserver(r,s);return l&&m.observe(n.current),()=>{l&&m.disconnect()}},[n,s]),[n,i]};var O=e(79698);const D=(s,n)=>{const i=(0,O.W)(n);(0,a.useLayoutEffect)(()=>{const d=new ResizeObserver(i);return Array.isArray(s)?s.forEach(r=>{r.current&&d.observe(r.current)}):s.current&&d.observe(s.current),()=>{d.disconnect()}},[s,i])};var o=e(16607),M=e(96987),P=e(10574);const p=s=>{const n=(0,a.useRef)(null),[i,d]=(0,a.useState)(null),[r,l]=f({root:null,rootMargin:"0px",threshold:0});return D(r,()=>{r.current&&d(r.current.getBoundingClientRect())}),(0,a.useEffect)(()=>{n.current&&d(n.current.getBoundingClientRect())},[n]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{height:i?.height},ref:r,children:l&&(0,t.jsx)(h,{ref:n,...s})}),!l&&(0,t.jsx)(h,{...s,sticky:!0,width:i?.width})]})};p.displayName="HeaderLayout";const B=(0,_.default)(o.x)`
  width: ${({width:s})=>s?`${s/16}rem`:void 0};
  z-index: ${({theme:s})=>s.zIndices[1]};
`,h=a.forwardRef(({navigationAction:s,primaryAction:n,secondaryAction:i,subtitle:d,title:r,sticky:l,width:m,...L},v)=>{const A=typeof d=="string";return l?(0,t.jsx)(B,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:m,"data-strapi-header-sticky":!0,children:(0,t.jsxs)(M.k,{justifyContent:"space-between",children:[(0,t.jsxs)(M.k,{children:[s&&(0,t.jsx)(o.x,{paddingRight:3,children:s}),(0,t.jsxs)(o.x,{children:[(0,t.jsx)(P.Z,{variant:"beta",as:"h1",...L,children:r}),A?(0,t.jsx)(P.Z,{variant:"pi",textColor:"neutral600",children:d}):d]}),i?(0,t.jsx)(o.x,{paddingLeft:4,children:i}):null]}),(0,t.jsx)(M.k,{children:n?(0,t.jsx)(o.x,{paddingLeft:2,children:n}):void 0})]})}):(0,t.jsxs)(o.x,{ref:v,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:s?6:8,background:"neutral100","data-strapi-header":!0,children:[s?(0,t.jsx)(o.x,{paddingBottom:2,children:s}):null,(0,t.jsxs)(M.k,{justifyContent:"space-between",children:[(0,t.jsxs)(M.k,{minWidth:0,children:[(0,t.jsx)(P.Z,{as:"h1",variant:"alpha",...L,children:r}),i?(0,t.jsx)(o.x,{paddingLeft:4,children:i}):null]}),n]}),A?(0,t.jsx)(P.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:d}):d]})})},40720:(R,c,e)=>{e.d(c,{o:()=>O});var t=e(85893),a=e(54863),_=e(16607);const f=(0,a.default)(_.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,O=({labelledBy:D="main-content-title",...o})=>(0,t.jsx)(f,{"aria-labelledby":D,as:"main",id:"main-content",tabIndex:-1,...o})}}]);
