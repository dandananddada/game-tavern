"use strict";(self.webpackChunkgame_tavern=self.webpackChunkgame_tavern||[]).push([[9789],{73972:(x,d,t)=>{t.d(d,{f:()=>v});var e=t(67294),r=t(80621),l=t(88767),c=t(52809),m=t(35326);const v=()=>{const o=(0,r.useNotification)(),{del:P,post:h,put:f,get:p}=(0,r.useFetchClient)(),{formatAPIError:C}=(0,r.useAPIErrorHandler)(),{isLoading:n,isError:s,data:_,refetch:a,error:i}=(0,l.useQuery)(["get-documentation",c.Z],async()=>{const{data:u}=await p(`/${c.Z}/getInfos`);return u});(0,e.useEffect)(()=>{s&&i&&o({type:"warning",message:i?C(i):{id:"notification.error"}})},[s,i,o,C]);const E=u=>{o({type:"warning",message:C(u)})},O=(u,M,L)=>{a(),o({type:u,message:{id:(0,m.Z)(M),defaultMessage:L}})},T=(0,l.useMutation)(({prefix:u,version:M})=>P(`${u}/deleteDoc/${M}`),{onSuccess:()=>O("info","notification.delete.success","Successfully deleted documentation"),onError:E}),I=(0,l.useMutation)(({prefix:u,body:M})=>f(`${u}/updateSettings`,M),{onSuccess:()=>O("success","notification.update.success","Successfully updated settings"),onError:E}),R=(0,l.useMutation)(({prefix:u,version:M})=>h(`${u}/regenerateDoc`,{version:M}),{onSuccess:()=>O("info","notification.generate.success","Successfully generated documentation"),onError:E});return{data:_,isLoading:n,isError:s,remove:T,submit:I,regenerate:R}}},16561:(x,d,t)=>{t.r(d),t.d(d,{default:()=>F});var e=t(67294),r=t(71590),l=t(34726),c=t(16607),m=t(40720),v=t(90731),o=t(5923),P=t(3547),h=t(29299),f=t(69398),p=t(10574),C=t(35752),n=t(96987),s=t(96208),_=t(4745),a=t(80621),i=t(81851),E=t(75975),O=t(54425),T=t(64593),I=t(86896),R=t(54863),u=t(12966),M=t(73972),L=t(10104);const Z=()=>{(0,a.useFocusWhenNavigate)();const{formatMessage:D}=(0,I.Z)(),{data:B,isLoading:j,isError:z,remove:H,regenerate:N}=(0,M.f)(),[y,A]=(0,e.useState)(!1),[b,S]=(0,e.useState)(!1),[G,Q]=(0,e.useState)(),{allowedActions:W}=(0,a.useRBAC)(u._),X=4,Y=(B?.docVersions?.length||0)+1,J=g=>{N.mutate({version:g,prefix:B?.prefix})},w=()=>{A(!y)},k=async()=>{S(!0),await H.mutateAsync({prefix:B?.prefix,version:G}),A(!y),S(!1)},q=g=>{Q(g),A(!y)},$=D({id:(0,L.O)("plugin.name"),defaultMessage:"Documentation"});return z?e.createElement(r.A,null,e.createElement(l.D,null,e.createElement(c.x,{paddingTop:8},e.createElement(a.AnErrorOccurred,null)))):e.createElement(r.A,null,e.createElement(T.q,{title:$}),e.createElement(m.o,{"aria-busy":j},e.createElement(v.T,{title:$,subtitle:D({id:(0,L.O)("pages.PluginPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:e.createElement(V,{disabled:!W.canOpen||!B?.currentVersion||!B?.prefix,href:K(`${B?.prefix}/v${B?.currentVersion}`),startIcon:e.createElement(i.Z,null)},D({id:(0,L.O)("pages.PluginPage.Button.open"),defaultMessage:"Open Documentation"}))}),e.createElement(l.D,null,j&&e.createElement(a.LoadingIndicatorPage,null,"Plugin is loading"),B?.docVersions.length?e.createElement(o.i,{colCount:X,rowCount:Y},e.createElement(P.h,null,e.createElement(h.Tr,null,e.createElement(f.Th,null,e.createElement(p.Z,{variant:"sigma",textColor:"neutral600"},D({id:(0,L.O)("pages.PluginPage.table.version"),defaultMessage:"Version"}))),e.createElement(f.Th,null,e.createElement(p.Z,{variant:"sigma",textColor:"neutral600"},D({id:(0,L.O)("pages.PluginPage.table.generated"),defaultMessage:"Last Generated"}))))),e.createElement(C.p,null,B.docVersions.sort((g,U)=>g.generatedDate<U.generatedDate?1:-1).map(g=>e.createElement(h.Tr,{key:g.version},e.createElement(f.Td,{width:"50%"},e.createElement(p.Z,null,g.version)),e.createElement(f.Td,{width:"50%"},e.createElement(p.Z,null,g.generatedDate)),e.createElement(f.Td,null,e.createElement(n.k,{justifyContent:"end",onClick:U=>U.stopPropagation()},e.createElement(s.h,{forwardedAs:"a",disabled:!W.canOpen,href:K(`${B.prefix}/v${g.version}`),noBorder:!0,icon:e.createElement(i.Z,null),target:"_blank",rel:"noopener noreferrer",label:D({id:(0,L.O)("pages.PluginPage.table.icon.show"),defaultMessage:"Open {target}"},{target:`${g.version}`})}),W.canRegenerate?e.createElement(s.h,{onClick:()=>J(g.version),noBorder:!0,icon:e.createElement(E.Z,null),label:D({id:(0,L.O)("pages.PluginPage.table.icon.regenerate"),defaultMessage:"Regenerate {target}"},{target:`${g.version}`})}):null,W.canUpdate&&g.version!==B.currentVersion?e.createElement(s.h,{onClick:()=>q(g.version),noBorder:!0,icon:e.createElement(O.Z,null),label:D({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${g.version}`})}):null)))))):e.createElement(a.EmptyStateLayout,null)),e.createElement(a.ConfirmDialog,{isConfirmButtonLoading:b,onConfirm:k,onToggleDialog:w,isOpen:y})))},V=(0,R.default)(_.Q)`
  text-decoration: none;
`,K=D=>D.startsWith("http")?D:D.startsWith("/")?`${window.strapi.backendURL}${D}`:`${window.strapi.backendURL}/${D}`,F=Z},35326:(x,d,t)=>{t.d(d,{Z:()=>l});var e=t(52809);const l=c=>`${e.Z}.${c}`},10104:(x,d,t)=>{t.d(d,{O:()=>e.Z});var e=t(35326)},34726:(x,d,t)=>{t.d(d,{D:()=>l});var e=t(85893),r=t(16607);const l=({children:c})=>(0,e.jsx)(r.x,{paddingLeft:10,paddingRight:10,children:c})},90731:(x,d,t)=>{t.d(d,{T:()=>f});var e=t(85893),r=t(67294),l=t(54863);const c=n=>{const s=(0,r.useRef)(null),[_,a]=(0,r.useState)(!0),i=([E])=>{a(E.isIntersecting)};return(0,r.useEffect)(()=>{const E=s.current,O=new IntersectionObserver(i,n);return E&&O.observe(s.current),()=>{E&&O.disconnect()}},[s,n]),[s,_]};var m=t(79698);const v=(n,s)=>{const _=(0,m.W)(s);(0,r.useLayoutEffect)(()=>{const a=new ResizeObserver(_);return Array.isArray(n)?n.forEach(i=>{i.current&&a.observe(i.current)}):n.current&&a.observe(n.current),()=>{a.disconnect()}},[n,_])};var o=t(16607),P=t(96987),h=t(10574);const f=n=>{const s=(0,r.useRef)(null),[_,a]=(0,r.useState)(null),[i,E]=c({root:null,rootMargin:"0px",threshold:0});return v(i,()=>{i.current&&a(i.current.getBoundingClientRect())}),(0,r.useEffect)(()=>{s.current&&a(s.current.getBoundingClientRect())},[s]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:_?.height},ref:i,children:E&&(0,e.jsx)(C,{ref:s,...n})}),!E&&(0,e.jsx)(C,{...n,sticky:!0,width:_?.width})]})};f.displayName="HeaderLayout";const p=(0,l.default)(o.x)`
  width: ${({width:n})=>n?`${n/16}rem`:void 0};
  z-index: ${({theme:n})=>n.zIndices[1]};
`,C=r.forwardRef(({navigationAction:n,primaryAction:s,secondaryAction:_,subtitle:a,title:i,sticky:E,width:O,...T},I)=>{const R=typeof a=="string";return E?(0,e.jsx)(p,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:O,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(P.k,{justifyContent:"space-between",children:[(0,e.jsxs)(P.k,{children:[n&&(0,e.jsx)(o.x,{paddingRight:3,children:n}),(0,e.jsxs)(o.x,{children:[(0,e.jsx)(h.Z,{variant:"beta",as:"h1",...T,children:i}),R?(0,e.jsx)(h.Z,{variant:"pi",textColor:"neutral600",children:a}):a]}),_?(0,e.jsx)(o.x,{paddingLeft:4,children:_}):null]}),(0,e.jsx)(P.k,{children:s?(0,e.jsx)(o.x,{paddingLeft:2,children:s}):void 0})]})}):(0,e.jsxs)(o.x,{ref:I,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:n?6:8,background:"neutral100","data-strapi-header":!0,children:[n?(0,e.jsx)(o.x,{paddingBottom:2,children:n}):null,(0,e.jsxs)(P.k,{justifyContent:"space-between",children:[(0,e.jsxs)(P.k,{minWidth:0,children:[(0,e.jsx)(h.Z,{as:"h1",variant:"alpha",...T,children:i}),_?(0,e.jsx)(o.x,{paddingLeft:4,children:_}):null]}),s]}),R?(0,e.jsx)(h.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:a}):a]})})},71590:(x,d,t)=>{t.d(d,{A:()=>v});var e=t(85893),r=t(54863),l=t(16607);const c=(0,r.default)(l.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:o})=>o?"auto 1fr":"1fr"};
`,m=(0,r.default)(l.x)`
  overflow-x: hidden;
`,v=({sideNav:o,children:P})=>(0,e.jsxs)(c,{hasSideNav:Boolean(o),children:[o,(0,e.jsx)(m,{paddingBottom:10,children:P})]})},4745:(x,d,t)=>{t.d(d,{Q:()=>f});var e=t(85893),r=t(67294),l=t(73727),c=t(54863),m=t(62485),v=t(20501),o=t(96987),P=t(10574);const h=(0,c.default)(v.G)`
  &[aria-disabled='true'] {
    ${m.sg}
    &:active {
      ${m.sg}
    }
  }
  &:hover {
    ${m.yP}
  }
  &:active {
    ${m.tB}
  }
  ${m.PD}
`,f=r.forwardRef(({variant:p="default",startIcon:C,endIcon:n,disabled:s=!1,children:_,size:a="S",href:i,to:E,...O},T)=>{const I=i?"_blank":void 0,R=i?"noreferrer noopener":void 0,u=a==="S"?2:"10px",M=4;return(0,e.jsxs)(h,{ref:T,"aria-disabled":s,size:a,variant:p,target:I,rel:R,to:s?void 0:E,href:s?"#":i,background:"buttonPrimary600",borderColor:"buttonPrimary600",hasRadius:!0,gap:2,inline:!0,paddingBottom:u,paddingLeft:M,paddingRight:M,paddingTop:u,pointerEvents:s?"none":void 0,...O,as:E&&!s?l.NavLink:"a",children:[C&&(0,e.jsx)(o.k,{"aria-hidden":!0,children:C}),(0,e.jsx)(P.Z,{variant:a==="S"?"pi":void 0,fontWeight:"bold",textColor:"buttonNeutral0",children:_}),n&&(0,e.jsx)(o.k,{"aria-hidden":!0,children:n})]})})},40720:(x,d,t)=>{t.d(d,{o:()=>m});var e=t(85893),r=t(54863),l=t(16607);const c=(0,r.default)(l.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,m=({labelledBy:v="main-content-title",...o})=>(0,e.jsx)(c,{"aria-labelledby":v,as:"main",id:"main-content",tabIndex:-1,...o})}}]);
