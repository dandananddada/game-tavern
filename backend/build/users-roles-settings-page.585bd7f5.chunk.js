(self.webpackChunkgame_tavern=self.webpackChunkgame_tavern||[]).push([[8853],{26302:(p,h,t)=>{"use strict";t.r(h),t.d(h,{default:()=>Tt});var e=t(67294),n=t(80621),r=t(16550),a=t(84419),o=t(40720),d=t(90731),i=t(12473),f=t(34726),g=t(96987),u=t(10574),L=t(31988),y=t(6498),c=t(38670),m=t(457),R=t(18226),C=t(41054),E=t(86896),B=t(88767),S=t(45697),T=t.n(S);const F=(0,e.createContext)({}),$=({children:s,value:l})=>e.createElement(F.Provider,{value:l},s),K=()=>(0,e.useContext)(F);$.propTypes={children:T().node.isRequired,value:T().object.isRequired};var U=t(58655),J=t(63122),H=t(1744),ce=t(68889),ne=t(11700),de=t.n(ne);function Q(s){switch(s){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return de()(s.replace("api::","").replace("plugin::",""))}}const se=Q,fe=(s,l)=>{const x=Object.keys(l).sort().map(v=>({name:v,isOpen:!1}));return{...s,collapses:x}};var z=t(16607),ue=t(89734),re=t.n(ue),q=t(22546),_=t(22304),ae=t(40989),Be=t(27361),oe=t.n(Be),ee=t(54863);const Ee=(0,ee.css)`
  background: ${s=>s.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,je=(0,ee.default)(z.x)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${s=>s.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${s=>s.isActive&&Ee}
  &:hover {
    ${Ee}
  }
`,Se=ee.default.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:s})=>s.colors.neutral150};
`,xe=({subCategory:s})=>{const{formatMessage:l}=(0,E.Z)(),{onChange:x,onChangeSelectAll:v,onSelectedAction:A,selectedAction:P,modifiedData:D}=K(),b=(0,e.useMemo)(()=>oe()(D,s.name,{}),[D,s]),O=(0,e.useMemo)(()=>Object.values(b).every(M=>M.enabled===!0),[b]),j=(0,e.useMemo)(()=>Object.values(b).some(M=>M.enabled===!0)&&!O,[b,O]),I=(0,e.useCallback)(({target:{name:M}})=>{v({target:{name:M,value:!O}})},[O,v]),Z=(0,e.useCallback)(M=>P===M,[P]);return e.createElement(z.x,null,e.createElement(g.k,{justifyContent:"space-between",alignItems:"center"},e.createElement(z.x,{paddingRight:4},e.createElement(u.Z,{variant:"sigma",textColor:"neutral600"},s.label)),e.createElement(Se,null),e.createElement(z.x,{paddingLeft:4},e.createElement(q.X,{name:s.name,value:O,onValueChange:M=>I({target:{name:s.name,value:M}}),indeterminate:j},l({id:"app.utils.select-all",defaultMessage:"Select all"})))),e.createElement(g.k,{paddingTop:6,paddingBottom:6},e.createElement(L.r,{gap:2,style:{flex:1}},s.actions.map(M=>{const W=`${M.name}.enabled`;return e.createElement(y.P,{col:6,key:M.name},e.createElement(je,{isActive:Z(M.name),padding:2,hasRadius:!0},e.createElement(q.X,{value:oe()(D,W,!1),name:W,onValueChange:N=>x({target:{name:W,value:N}})},M.label),e.createElement("button",{type:"button",onClick:()=>A(M.name),style:{display:"inline-flex",alignItems:"center"}},e.createElement(_.T,{as:"span"},l({id:"app.utils.show-bound-route",defaultMessage:"Show bound route for {route}"},{route:M.name})),e.createElement(ae.Z,null))))}))))};xe.propTypes={subCategory:T().object.isRequired};const Ie=xe,ye=({name:s,permissions:l})=>{const x=(0,e.useMemo)(()=>re()(Object.values(l.controllers).reduce((v,A,P)=>{const D=`${s}.controllers.${Object.keys(l.controllers)[P]}`,b=re()(Object.keys(A).reduce((O,j)=>[...O,{...A[j],label:j,name:`${D}.${j}`}],[]),"label");return[...v,{actions:b,label:Object.keys(l.controllers)[P],name:D}]},[]),"label"),[s,l]);return e.createElement(z.x,{padding:6},x.map(v=>e.createElement(Ie,{key:v.name,subCategory:v})))};ye.propTypes={name:T().string.isRequired,permissions:T().object.isRequired};const $e=ye;var ve=t(18172);const Ze={collapses:[]},Ue=(s,l)=>(0,ve.default)(s,x=>{switch(l.type){case"TOGGLE_COLLAPSE":{x.collapses=s.collapses.map((v,A)=>A===l.index?{...v,isOpen:!v.isOpen}:{...v,isOpen:!1});break}default:return x}}),We=()=>{const{modifiedData:s}=K(),{formatMessage:l}=(0,E.Z)(),[{collapses:x},v]=(0,e.useReducer)(Ue,Ze,P=>fe(P,s)),A=P=>v({type:"TOGGLE_COLLAPSE",index:P});return e.createElement(g.k,{direction:"column",alignItems:"stretch",gap:1},x.map((P,D)=>e.createElement(J.U,{expanded:P.isOpen,onToggle:()=>A(D),key:P.name,variant:D%2===0?"secondary":void 0},e.createElement(H.B,{title:se(P.name),description:l({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:P.name}),variant:D%2?"primary":"secondary"}),e.createElement(ce.v,null,e.createElement($e,{permissions:s[P.name],name:P.name})))))};var ke=t(41609),Fe=t.n(ke),Ne=t(82569),Ke=t.n(Ne),ze=t(35161),Ge=t.n(ze),He=t(13217),Ve=t.n(He);const we=s=>{switch(s){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},Qe=(0,ee.default)(z.x)`
  margin: -1px;
  border-radius: ${({theme:s})=>s.spaces[1]} 0 0 ${({theme:s})=>s.spaces[1]};
`;function me({route:s}){const{formatMessage:l}=(0,E.Z)(),{method:x,handler:v,path:A}=s,P=A?Ve()(A.split("/")):[],[D="",b=""]=v?v.split("."):[],O=we(s.method);return e.createElement(g.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(u.Z,{variant:"delta",as:"h3"},l({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",e.createElement("span",null,D),e.createElement(u.Z,{variant:"delta",textColor:"primary600"},".",b)),e.createElement(g.k,{hasRadius:!0,background:"neutral0",borderColor:"neutral200",gap:0},e.createElement(Qe,{background:O.background,borderColor:O.border,padding:2},e.createElement(u.Z,{fontWeight:"bold",textColor:O.text},x)),e.createElement(z.x,{paddingLeft:2,paddingRight:2},Ge()(P,j=>e.createElement(u.Z,{key:j,textColor:j.includes(":")?"neutral600":"neutral900"},"/",j)))))}me.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},me.propTypes={route:T().shape({handler:T().string,method:T().string,path:T().string})};const Xe=me,Ye=()=>{const{formatMessage:s}=(0,E.Z)(),{selectedAction:l,routes:x}=K(),v=Ke()(l.split("."),"controllers"),A=oe()(x,v[0]),P=v.slice(1).join("."),D=Fe()(A)?[]:A.filter(b=>b.handler.endsWith(P));return e.createElement(y.P,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"}},l?e.createElement(g.k,{direction:"column",alignItems:"stretch",gap:2},D.map((b,O)=>e.createElement(Xe,{key:O,route:b}))):e.createElement(g.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(u.Z,{variant:"delta",as:"h3"},s({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})),e.createElement(u.Z,{as:"p",textColor:"neutral600"},s({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))))},Je=(s,l,x)=>({...s,initialData:l,modifiedData:l,routes:x});var qe=t(36968),Ce=t.n(qe),_e=t(69572),et=t.n(_e);const tt={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},nt=(s,l)=>(0,ve.default)(s,x=>{switch(l.type){case"ON_CHANGE":{const v=l.keys.length,A=l.keys[v-1]==="enabled";if(l.value&&A){const P=et()(l.keys,v-1).join(".");x.selectedAction=P}Ce()(x,["modifiedData",...l.keys],l.value);break}case"ON_CHANGE_SELECT_ALL":{const v=["modifiedData",...l.keys],A=oe()(s,v,{}),P=Object.keys(A).reduce((D,b)=>(D[b]={...A[b],enabled:l.value},D),{});Ce()(x,v,P);break}case"ON_RESET":{x.modifiedData=s.initialData;break}case"ON_SUBMIT_SUCCEEDED":{x.initialData=s.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:v}=l;x.selectedAction=v===s.selectedAction?"":v;break}default:return x}}),Pe=(0,e.forwardRef)(({permissions:s,routes:l},x)=>{const{formatMessage:v}=(0,E.Z)(),[A,P]=(0,e.useReducer)(nt,tt,I=>Je(I,s,l));(0,e.useImperativeHandle)(x,()=>({getPermissions(){return{permissions:A.modifiedData}},resetForm(){P({type:"ON_RESET"})},setFormAfterSubmit(){P({type:"ON_SUBMIT_SUCCEEDED"})}}));const j={...A,onChange:({target:{name:I,value:Z}})=>P({type:"ON_CHANGE",keys:I.split("."),value:Z==="empty__string_value"?"":Z}),onChangeSelectAll:({target:{name:I,value:Z}})=>P({type:"ON_CHANGE_SELECT_ALL",keys:I.split("."),value:Z}),onSelectedAction:I=>P({type:"SELECT_ACTION",actionToSelect:I})};return e.createElement($,{value:j},e.createElement(L.r,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},e.createElement(y.P,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(g.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(g.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(u.Z,{variant:"delta",as:"h2"},v({id:(0,U.Z)("Plugins.header.title"),defaultMessage:"Permissions"})),e.createElement(u.Z,{as:"p",textColor:"neutral600"},v({id:(0,U.Z)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."}))),e.createElement(We,null))),e.createElement(Ye,null)))});Pe.propTypes={permissions:T().object.isRequired,routes:T().object.isRequired};const Re=(0,e.memo)(Pe);var ge=t(87561);const Me=ge.Ry().shape({name:ge.Z_().required(n.translatedErrors.required),description:ge.Z_().required(n.translatedErrors.required)});var te=t(99688);const Te=()=>{const s=(0,n.useNotification)(),{get:l}=(0,n.useFetchClient)(),{formatAPIError:x}=(0,n.useAPIErrorHandler)(te.OB),[{data:v,isLoading:A,error:P,refetch:D},{data:b,isLoading:O,error:j,refetch:I}]=(0,B.useQueries)([{queryKey:["users-permissions","permissions"],async queryFn(){const{data:{permissions:W}}=await l("/users-permissions/permissions");return W}},{queryKey:["users-permissions","routes"],async queryFn(){const{data:{routes:W}}=await l("/users-permissions/routes");return W}}]),Z=async()=>{await Promise.all([D(),I()])};(0,e.useEffect)(()=>{P&&s({type:"warning",message:x(P)})},[s,P,x]),(0,e.useEffect)(()=>{j&&s({type:"warning",message:x(j)})},[s,j,x]);const M=A||O;return{permissions:v?(0,te.YX)(v):{},routes:b??{},getData:Z,isLoading:M}},st=()=>{const{formatMessage:s}=(0,E.Z)(),l=(0,n.useNotification)(),{goBack:x}=(0,r.k6)(),{lockApp:v,unlockApp:A}=(0,n.useOverlayBlocker)(),{isLoading:P,permissions:D,routes:b}=Te(),{trackUsage:O}=(0,n.useTracking)(),j=e.useRef(),{post:I}=(0,n.useFetchClient)(),Z=(0,B.useMutation)(W=>I("/users-permissions/roles",W),{onError(){l({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})},onSuccess(){O("didCreateRole"),l({type:"success",message:{id:(0,U.Z)("Settings.roles.created"),defaultMessage:"Role created"}}),x()}}),M=async W=>{v();const N=j.current.getPermissions();await Z.mutate({...W,...N,users:[]}),A()};return e.createElement(o.o,null,e.createElement(n.SettingsPageTitle,{name:"Roles"}),e.createElement(C.Formik,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:M,validationSchema:Me},({handleSubmit:W,values:N,handleChange:X,errors:k})=>e.createElement(n.Form,{noValidate:!0,onSubmit:W},e.createElement(d.T,{primaryAction:!P&&e.createElement(i.z,{type:"submit",loading:Z.isLoading,startIcon:e.createElement(R.Z,null)},s({id:"global.save",defaultMessage:"Save"})),title:s({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:s({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),e.createElement(f.D,null,e.createElement(g.k,{background:"neutral0",direction:"column",alignItems:"stretch",gap:7,hasRadius:!0,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,shadow:"filterShadow"},e.createElement(g.k,{direction:"column",alignItems:"stretch"},e.createElement(u.Z,{variant:"delta",as:"h2"},s({id:(0,U.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),e.createElement(L.r,{gap:4},e.createElement(y.P,{col:6},e.createElement(c.o,{name:"name",value:N.name||"",onChange:X,label:s({id:"global.name",defaultMessage:"Name"}),error:k?.name?s({id:k.name}):!1,required:!0})),e.createElement(y.P,{col:6},e.createElement(m.g,{id:"description",value:N.description||"",onChange:X,label:s({id:"global.description",defaultMessage:"Description"}),error:k?.description?s({id:k.description}):!1,required:!0})))),!P&&e.createElement(Re,{ref:j,permissions:D,routes:b}))))))},rt=()=>e.createElement(n.CheckPagePermissions,{permissions:a._.createRole},e.createElement(st,null));var at=t(97695);const ot=()=>{const{formatMessage:s}=(0,E.Z)(),l=(0,n.useNotification)(),{lockApp:x,unlockApp:v}=(0,n.useOverlayBlocker)(),{params:{id:A}}=(0,r.$B)("/settings/users-permissions/roles/:id"),{get:P}=(0,n.useFetchClient)(),{isLoading:D,routes:b}=Te(),{data:O,isLoading:j,refetch:I}=(0,B.useQuery)(["users-permissions","role",A],async()=>{const{data:{role:k}}=await P(`/users-permissions/roles/${A}`);return k}),Z=e.useRef(),{put:M}=(0,n.useFetchClient)(),{formatAPIError:W}=(0,n.useAPIErrorHandler)(),N=(0,B.useMutation)(k=>M(`/users-permissions/roles/${A}`,k),{onError(k){l({type:"warning",message:W(k)})},async onSuccess(){l({type:"success",message:{id:(0,U.Z)("Settings.roles.created"),defaultMessage:"Role edited"}}),await I()}}),X=async k=>{x();const V=Z.current.getPermissions();await N.mutate({...k,...V,users:[]}),v()};return j?e.createElement(n.LoadingIndicatorPage,null):e.createElement(o.o,null,e.createElement(n.SettingsPageTitle,{name:"Roles"}),e.createElement(C.Formik,{enableReinitialize:!0,initialValues:{name:O.name,description:O.description},onSubmit:X,validationSchema:Me},({handleSubmit:k,values:V,handleChange:ie,errors:Y})=>e.createElement(n.Form,{noValidate:!0,onSubmit:k},e.createElement(d.T,{primaryAction:!D&&e.createElement(i.z,{disabled:O.code==="strapi-super-admin",type:"submit",loading:N.isLoading,startIcon:e.createElement(R.Z,null)},s({id:"global.save",defaultMessage:"Save"})),title:O.name,subtitle:O.description,navigationAction:e.createElement(n.Link,{startIcon:e.createElement(at.Z,null),to:"/settings/users-permissions/roles"},s({id:"global.back",defaultMessage:"Back"}))}),e.createElement(f.D,null,e.createElement(g.k,{background:"neutral0",direction:"column",alignItems:"stretch",gap:7,hasRadius:!0,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,shadow:"filterShadow"},e.createElement(g.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(u.Z,{variant:"delta",as:"h2"},s({id:(0,U.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),e.createElement(L.r,{gap:4},e.createElement(y.P,{col:6},e.createElement(c.o,{name:"name",value:V.name||"",onChange:ie,label:s({id:"global.name",defaultMessage:"Name"}),error:Y?.name?s({id:Y.name}):!1,required:!0})),e.createElement(y.P,{col:6},e.createElement(m.g,{id:"description",value:V.description||"",onChange:ie,label:s({id:"global.description",defaultMessage:"Description"}),error:Y?.description?s({id:Y.description}):!1,required:!0})))),!D&&e.createElement(Re,{ref:Z,permissions:O.permissions,routes:b}))))))},it=()=>e.createElement(n.CheckPagePermissions,{permissions:a._.updateRole},e.createElement(ot,null));var lt=t(334),ct=t(71590),dt=t(55040),ut=t(5923),mt=t(3547),Le=t(29299),G=t(69398),gt=t(83598),pt=t(29824),ht=t(35752),ft=t(96208),Et=t(2382),xt=t(54425);const yt=(0,ee.default)(pt.r)`
  align-items: center;
  height: ${(0,n.pxToRem)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:s})=>`${s.spaces[2]}}`};
  width: ${(0,n.pxToRem)(32)};

  svg {
    height: ${(0,n.pxToRem)(12)};
    width: ${(0,n.pxToRem)(12)};

    path {
      fill: ${({theme:s})=>s.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:s})=>s.colors.neutral800};
      }
    }
  }
`,pe=({sortedRoles:s,canDelete:l,permissions:x,setRoleToDelete:v,onDelete:A})=>{const{formatMessage:P}=(0,E.Z)(),{push:D}=(0,r.k6)(),[b,O]=A,j=M=>l&&!["public","authenticated"].includes(M.type),I=M=>{v(M),O(!b)},Z=M=>{D(`/settings/users-permissions/roles/${M}`)};return e.createElement(ht.p,null,s?.map(M=>e.createElement(Le.Tr,{key:M.name,...(0,n.onRowClick)({fn:()=>Z(M.id)})},e.createElement(G.Td,{width:"20%"},e.createElement(u.Z,null,M.name)),e.createElement(G.Td,{width:"50%"},e.createElement(u.Z,null,M.description)),e.createElement(G.Td,{width:"30%"},e.createElement(u.Z,null,P({id:"Roles.RoleRow.user-count",defaultMessage:"{number, plural, =0 {# user} one {# user} other {# users}}"},{number:M.nb_users}))),e.createElement(G.Td,null,e.createElement(g.k,{justifyContent:"end",...n.stopPropagation},e.createElement(n.CheckPermissions,{permissions:x.updateRole},e.createElement(yt,{to:`/settings/users-permissions/roles/${M.id}`,"aria-label":P({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${M.name}`})},e.createElement(Et.Z,null))),j(M)&&e.createElement(n.CheckPermissions,{permissions:x.deleteRole},e.createElement(ft.h,{onClick:()=>I(M.id),noBorder:!0,icon:e.createElement(xt.Z,null),label:P({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${M.name}`})})))))))},vt=pe;pe.defaultProps={canDelete:!1},pe.propTypes={onDelete:T().array.isRequired,permissions:T().object.isRequired,setRoleToDelete:T().func.isRequired,sortedRoles:T().array.isRequired,canDelete:T().bool};const Ct=async(s,l)=>{try{const{get:x}=(0,n.getFetchClient)(),{data:v}=await x("/users-permissions/roles");return l("The roles have loaded successfully"),v}catch(x){throw s({type:"warning",message:{id:"notification.error"}}),new Error(x)}},Pt=async(s,l)=>{try{const{del:x}=(0,n.getFetchClient)();await x(`/users-permissions/roles/${s}`)}catch{l({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}},Rt=()=>{const{trackUsage:s}=(0,n.useTracking)(),{formatMessage:l,locale:x}=(0,E.Z)(),v=(0,n.useNotification)(),{notifyStatus:A}=(0,lt.G)(),[{query:P}]=(0,n.useQueryParams)(),D=P?._q||"",[b,O]=(0,e.useState)(!1),[j,I]=(0,e.useState)(!1),[Z,M]=(0,e.useState)();(0,n.useFocusWhenNavigate)();const{isLoading:W,allowedActions:{canRead:N,canDelete:X}}=(0,n.useRBAC)({create:a._.createRole,read:a._.readRoles,update:a._.updateRole,delete:a._.deleteRole}),{isLoading:k,data:{roles:V},isFetching:ie,refetch:Y}=(0,B.useQuery)("get-roles",()=>Ct(v,A),{initialData:{},enabled:N}),{includes:Ae}=(0,n.useFilter)(x,{sensitivity:"base"}),De=(0,n.useCollator)(x,{sensitivity:"base"}),Oe=k||ie,Lt=()=>{O(!b)},At={roles:{id:(0,te.OB)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,te.OB)("Roles.empty.search"),defaultMessage:"No roles match the search."}},Dt=l({id:"global.roles",defaultMessage:"Roles"}),Ot=(0,B.useMutation)(w=>Pt(w,v),{async onSuccess(){await Y()}}),bt=async()=>{I(!0),await Ot.mutateAsync(Z),O(!b),I(!1)},le=(V||[]).filter(w=>Ae(w.name,D)||Ae(w.description,D)).sort((w,be)=>De.compare(w.name,be.name)||De.compare(w.description,be.description)),Bt=D&&!le.length?"search":"roles",jt=4,St=(V?.length||0)+1;return e.createElement(ct.A,null,e.createElement(n.SettingsPageTitle,{name:Dt}),e.createElement(o.o,{"aria-busy":Oe},e.createElement(d.T,{title:l({id:"global.roles",defaultMessage:"Roles"}),subtitle:l({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:e.createElement(n.CheckPermissions,{permissions:a._.createRole},e.createElement(n.LinkButton,{to:"/settings/users-permissions/roles/new",onClick:()=>s("willCreateRole"),startIcon:e.createElement(gt.Z,null),size:"S"},l({id:(0,te.OB)("List.button.roles"),defaultMessage:"Add new role"})))}),e.createElement(dt.Z,{startActions:e.createElement(n.SearchURLQuery,{label:l({id:"app.component.search.label",defaultMessage:"Search"})})}),e.createElement(f.D,null,!N&&e.createElement(n.NoPermissions,null),(Oe||W)&&e.createElement(n.LoadingIndicatorPage,null),N&&le&&le?.length?e.createElement(ut.i,{colCount:jt,rowCount:St},e.createElement(mt.h,null,e.createElement(Le.Tr,null,e.createElement(G.Th,null,e.createElement(u.Z,{variant:"sigma",textColor:"neutral600"},l({id:"global.name",defaultMessage:"Name"}))),e.createElement(G.Th,null,e.createElement(u.Z,{variant:"sigma",textColor:"neutral600"},l({id:"global.description",defaultMessage:"Description"}))),e.createElement(G.Th,null,e.createElement(u.Z,{variant:"sigma",textColor:"neutral600"},l({id:"global.users",defaultMessage:"Users"}))),e.createElement(G.Th,null,e.createElement(_.T,null,l({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(vt,{sortedRoles:le,canDelete:X,permissions:a._,setRoleToDelete:M,onDelete:[b,O]})):e.createElement(n.EmptyStateLayout,{content:At[Bt]})),e.createElement(n.ConfirmDialog,{isConfirmButtonLoading:j,onConfirm:bt,onToggleDialog:Lt,isOpen:b})))},Mt=()=>e.createElement(n.CheckPagePermissions,{permissions:a._.accessRoles},e.createElement(Rt,null)),Tt=()=>e.createElement(n.CheckPagePermissions,{permissions:a._.accessRoles},e.createElement(r.rs,null,e.createElement(r.AW,{path:"/settings/users-permissions/roles/new",component:rt,exact:!0}),e.createElement(r.AW,{path:"/settings/users-permissions/roles/:id",component:it,exact:!0}),e.createElement(r.AW,{path:"/settings/users-permissions/roles",component:Mt,exact:!0}),e.createElement(r.AW,{path:"",component:n.AnErrorOccurred})))},99688:(p,h,t)=>{"use strict";t.d(h,{YX:()=>a,OB:()=>o.Z});var e=t(41609),n=t.n(e);const a=d=>Object.keys(d).reduce((i,f)=>{const g=d[f].controllers,u=Object.keys(g).reduce((L,y)=>(n()(g[y])||(L[y]=g[y]),L),{});return n()(u)||(i[f]={controllers:u}),i},{});var o=t(58655)},47443:(p,h,t)=>{var e=t(42118);function n(r,a){var o=r==null?0:r.length;return!!o&&e(r,a,0)>-1}p.exports=n},1196:p=>{function h(t,e,n){for(var r=-1,a=t==null?0:t.length;++r<a;)if(n(e,t[r]))return!0;return!1}p.exports=h},20731:(p,h,t)=>{var e=t(88668),n=t(47443),r=t(1196),a=t(29932),o=t(7518),d=t(74757),i=200;function f(g,u,L,y){var c=-1,m=n,R=!0,C=g.length,E=[],B=u.length;if(!C)return E;L&&(u=a(u,o(L))),y?(m=r,R=!1):u.length>=i&&(m=d,R=!1,u=new e(u));e:for(;++c<C;){var S=g[c],T=L==null?S:L(S);if(S=y||S!==0?S:0,R&&T===T){for(var F=B;F--;)if(u[F]===T)continue e;E.push(S)}else m(u,T,y)||E.push(S)}return E}p.exports=f},89881:(p,h,t)=>{var e=t(47816),n=t(99291),r=n(e);p.exports=r},41848:p=>{function h(t,e,n,r){for(var a=t.length,o=n+(r?1:-1);r?o--:++o<a;)if(e(t[o],o,t))return o;return-1}p.exports=h},42118:(p,h,t)=>{var e=t(41848),n=t(62722),r=t(42351);function a(o,d,i){return d===d?r(o,d,i):e(o,n,i)}p.exports=a},62722:p=>{function h(t){return t!==t}p.exports=h},69199:(p,h,t)=>{var e=t(89881),n=t(98612);function r(a,o){var d=-1,i=n(a)?Array(a.length):[];return e(a,function(f,g,u){i[++d]=o(f,g,u)}),i}p.exports=r},82689:(p,h,t)=>{var e=t(29932),n=t(97786),r=t(67206),a=t(69199),o=t(71131),d=t(7518),i=t(85022),f=t(6557),g=t(1469);function u(L,y,c){y.length?y=e(y,function(C){return g(C)?function(E){return n(E,C.length===1?C[0]:C)}:C}):y=[f];var m=-1;y=e(y,d(r));var R=a(L,function(C,E,B){var S=e(y,function(T){return T(C)});return{criteria:S,index:++m,value:C}});return o(R,function(C,E){return i(C,E,c)})}p.exports=u},71131:p=>{function h(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}p.exports=h},26393:(p,h,t)=>{var e=t(33448);function n(r,a){if(r!==a){var o=r!==void 0,d=r===null,i=r===r,f=e(r),g=a!==void 0,u=a===null,L=a===a,y=e(a);if(!u&&!y&&!f&&r>a||f&&g&&L&&!u&&!y||d&&g&&L||!o&&L||!i)return 1;if(!d&&!f&&!y&&r<a||y&&o&&i&&!d&&!f||u&&o&&i||!g&&i||!L)return-1}return 0}p.exports=n},85022:(p,h,t)=>{var e=t(26393);function n(r,a,o){for(var d=-1,i=r.criteria,f=a.criteria,g=i.length,u=o.length;++d<g;){var L=e(i[d],f[d]);if(L){if(d>=u)return L;var y=o[d];return L*(y=="desc"?-1:1)}}return r.index-a.index}p.exports=n},99291:(p,h,t)=>{var e=t(98612);function n(r,a){return function(o,d){if(o==null)return o;if(!e(o))return r(o,d);for(var i=o.length,f=a?i:-1,g=Object(o);(a?f--:++f<i)&&d(g[f],f,g)!==!1;);return o}}p.exports=n},42351:p=>{function h(t,e,n){for(var r=n-1,a=t.length;++r<a;)if(t[r]===e)return r;return-1}p.exports=h},35161:(p,h,t)=>{var e=t(29932),n=t(67206),r=t(69199),a=t(1469);function o(d,i){var f=a(d)?e:r;return f(d,n(i,3))}p.exports=o},89734:(p,h,t)=>{var e=t(21078),n=t(82689),r=t(5976),a=t(16612),o=r(function(d,i){if(d==null)return[];var f=i.length;return f>1&&a(d,i[0],i[1])?i=[]:f>2&&a(i[0],i[1],i[2])&&(i=[i[0]]),n(d,e(i,1),[])});p.exports=o},13217:(p,h,t)=>{var e=t(14259);function n(r){var a=r==null?0:r.length;return a?e(r,1,a):[]}p.exports=n},69572:(p,h,t)=>{var e=t(14259),n=t(40554);function r(a,o,d){return a&&a.length?(o=d||o===void 0?1:n(o),e(a,0,o<0?0:o)):[]}p.exports=r},82569:(p,h,t)=>{var e=t(20731),n=t(5976),r=t(29246),a=n(function(o,d){return r(o)?e(o,d):[]});p.exports=a},63122:(p,h,t)=>{"use strict";t.d(h,{U:()=>y,y:()=>u});var e=t(85893),n=t(67294),r=t(54863),a=t(31254),o=t(92058),d=t(10574),i=t(96987),f=t(16607);const g=({theme:c,expanded:m,variant:R,disabled:C,error:E})=>E?`1px solid ${c.colors.danger600} !important`:C?`1px solid ${c.colors.neutral150}`:m?`1px solid ${c.colors.primary600}`:R==="primary"?`1px solid ${c.colors.neutral0}`:`1px solid ${c.colors.neutral100}`,u=(0,r.default)(d.Z)``,L=(0,r.default)(f.x)`
  border: ${g};

  &:hover:not([aria-disabled='true']) {
    border: 1px solid ${({theme:c})=>c.colors.primary600};

    ${u} {
      color: ${({theme:c,expanded:m})=>m?void 0:c.colors.primary700};
    }

    ${d.Z} {
      color: ${({theme:c,expanded:m})=>m?void 0:c.colors.primary600};
    }

    & > ${i.k} {
      background: ${({theme:c})=>c.colors.primary100};
    }

    [data-strapi-dropdown='true'] {
      background: ${({theme:c})=>c.colors.primary200};
    }
  }
`,y=({children:c,disabled:m=!1,error:R,expanded:C=!1,hasErrorMessage:E=!0,id:B,onToggle:S,toggle:T,size:F="M",variant:$="primary",shadow:K})=>{const U=(0,o.M)(B),J=n.useMemo(()=>({expanded:C,onToggle:S,toggle:T,id:U,size:F,variant:$,disabled:m}),[m,C,U,S,F,T,$]);return(0,e.jsxs)(a.S.Provider,{value:J,children:[(0,e.jsx)(L,{"data-strapi-expanded":C,disabled:m,"aria-disabled":m,expanded:C,hasRadius:!0,variant:$,error:R,shadow:K,children:c}),R&&E&&(0,e.jsx)(f.x,{paddingTop:1,children:(0,e.jsx)(d.Z,{variant:"pi",textColor:"danger600",children:R})})]})}},68889:(p,h,t)=>{"use strict";t.d(h,{v:()=>a});var e=t(85893),n=t(31254),r=t(16607);const a=({children:o,...d})=>{const{expanded:i,id:f}=(0,n.A)();if(!i)return null;const g=`accordion-content-${f}`,u=`accordion-label-${f}`,L=`accordion-desc-${f}`;return(0,e.jsx)(r.x,{role:"region",id:g,"aria-labelledby":u,"aria-describedby":L,...d,children:o})}},31254:(p,h,t)=>{"use strict";t.d(h,{A:()=>r,S:()=>n});var e=t(67294);const n=(0,e.createContext)({disabled:!1,expanded:!1,id:"",size:"M",variant:"primary"}),r=()=>(0,e.useContext)(n)},1744:(p,h,t)=>{"use strict";t.d(h,{B:()=>c});var e=t(85893),n=t(58471),r=t(54863),a=t(63122),o=t(31254);const d=({expanded:m,disabled:R,variant:C})=>{let E="neutral100";return m?E="primary100":R?E="neutral150":C==="primary"&&(E="neutral0"),E};var i=t(58753),f=t(85200),g=t(96987),u=t(10574);const L=(0,r.default)(i.A)`
  text-align: left;

  // necessary to make the ellipsis prop work on the title
  > span {
    max-width: 100%;
  }

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:m,expanded:R})=>R?m.colors.primary600:m.colors.neutral500};
    }
  }
`,y=(0,r.default)(g.k)`
  min-height: ${({theme:m,size:R})=>m.sizes.accordions[R]};
  border-radius: ${({theme:m,expanded:R})=>R?`${m.borderRadius} ${m.borderRadius} 0 0`:m.borderRadius};

  &:hover {
    svg {
      path {
        fill: ${({theme:m})=>m.colors.primary600};
      }
    }
  }
`,c=({title:m,description:R,as:C="span",togglePosition:E="right",action:B,...S})=>{const{onToggle:T,toggle:F,expanded:$,id:K,size:U,variant:J,disabled:H}=(0,o.A)(),ce=`accordion-content-${K}`,ne=`accordion-label-${K}`,de=`accordion-desc-${K}`,Q=U==="M"?6:4,se=U==="M"?Q:Q-2,he=d({expanded:$,disabled:H,variant:J}),z={as:C,fontWeight:U==="S"?"bold":void 0,id:ne,textColor:$?"primary600":"neutral700",ellipsis:!0,variant:U==="M"?"delta":void 0},ue=$?"primary600":"neutral600",re=$?"primary200":"neutral200",q=U==="M"?`${32/16}rem`:`${24/16}rem`,_=()=>{H||(F&&!T?(console.warn('Deprecation warning: Usage of "toggle" prop in Accordion component is deprecated. This is discouraged and will be removed in the next major release. Please use "onToggle" instead'),F()):T&&T())},ae=(0,e.jsx)(g.k,{justifyContent:"center",borderRadius:"50%",height:q,width:q,transform:$?"rotate(180deg)":void 0,"data-strapi-dropdown":!0,"aria-hidden":!0,as:"span",background:re,cursor:H?"not-allowed":"pointer",onClick:_,shrink:0,children:(0,e.jsx)(f.J,{as:n.Z,width:U==="M"?`${11/16}rem`:`${8/16}rem`,color:$?"primary600":"neutral600"})});return(0,e.jsx)(y,{paddingBottom:se,paddingLeft:Q,paddingRight:Q,paddingTop:se,background:he,expanded:$,size:U,justifyContent:"space-between",cursor:H?"not-allowed":"",children:(0,e.jsxs)(g.k,{gap:3,flex:1,maxWidth:"100%",children:[E==="left"&&ae,(0,e.jsx)(L,{onClick:_,"aria-disabled":H,"aria-expanded":$,"aria-controls":ce,"aria-labelledby":ne,"data-strapi-accordion-toggle":!0,expanded:$,type:"button",flex:1,minWidth:0,...S,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(a.y,{...z,children:m}),R&&(0,e.jsx)(u.Z,{as:"p",id:de,textColor:ue,children:R})]})}),E==="right"&&(0,e.jsxs)(g.k,{gap:3,children:[ae,B]}),E==="left"&&B]})})}},55040:(p,h,t)=>{"use strict";t.d(h,{Z:()=>r});var e=t(85893),n=t(96987);const r=({startActions:a,endActions:o})=>!a&&!o?null:(0,e.jsxs)(n.k,{justifyContent:"space-between",alignItems:"flex-start",paddingBottom:4,paddingLeft:10,paddingRight:10,children:[(0,e.jsx)(n.k,{gap:2,wrap:"wrap",children:a}),(0,e.jsx)(n.k,{gap:2,shrink:0,wrap:"wrap",children:o})]})},34726:(p,h,t)=>{"use strict";t.d(h,{D:()=>r});var e=t(85893),n=t(16607);const r=({children:a})=>(0,e.jsx)(n.x,{paddingLeft:10,paddingRight:10,children:a})},90731:(p,h,t)=>{"use strict";t.d(h,{T:()=>u});var e=t(85893),n=t(67294),r=t(54863);const a=c=>{const m=(0,n.useRef)(null),[R,C]=(0,n.useState)(!0),E=([B])=>{C(B.isIntersecting)};return(0,n.useEffect)(()=>{const B=m.current,S=new IntersectionObserver(E,c);return B&&S.observe(m.current),()=>{B&&S.disconnect()}},[m,c]),[m,R]};var o=t(79698);const d=(c,m)=>{const R=(0,o.W)(m);(0,n.useLayoutEffect)(()=>{const C=new ResizeObserver(R);return Array.isArray(c)?c.forEach(E=>{E.current&&C.observe(E.current)}):c.current&&C.observe(c.current),()=>{C.disconnect()}},[c,R])};var i=t(16607),f=t(96987),g=t(10574);const u=c=>{const m=(0,n.useRef)(null),[R,C]=(0,n.useState)(null),[E,B]=a({root:null,rootMargin:"0px",threshold:0});return d(E,()=>{E.current&&C(E.current.getBoundingClientRect())}),(0,n.useEffect)(()=>{m.current&&C(m.current.getBoundingClientRect())},[m]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:R?.height},ref:E,children:B&&(0,e.jsx)(y,{ref:m,...c})}),!B&&(0,e.jsx)(y,{...c,sticky:!0,width:R?.width})]})};u.displayName="HeaderLayout";const L=(0,r.default)(i.x)`
  width: ${({width:c})=>c?`${c/16}rem`:void 0};
  z-index: ${({theme:c})=>c.zIndices[1]};
`,y=n.forwardRef(({navigationAction:c,primaryAction:m,secondaryAction:R,subtitle:C,title:E,sticky:B,width:S,...T},F)=>{const $=typeof C=="string";return B?(0,e.jsx)(L,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:S,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(f.k,{justifyContent:"space-between",children:[(0,e.jsxs)(f.k,{children:[c&&(0,e.jsx)(i.x,{paddingRight:3,children:c}),(0,e.jsxs)(i.x,{children:[(0,e.jsx)(g.Z,{variant:"beta",as:"h1",...T,children:E}),$?(0,e.jsx)(g.Z,{variant:"pi",textColor:"neutral600",children:C}):C]}),R?(0,e.jsx)(i.x,{paddingLeft:4,children:R}):null]}),(0,e.jsx)(f.k,{children:m?(0,e.jsx)(i.x,{paddingLeft:2,children:m}):void 0})]})}):(0,e.jsxs)(i.x,{ref:F,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:c?6:8,background:"neutral100","data-strapi-header":!0,children:[c?(0,e.jsx)(i.x,{paddingBottom:2,children:c}):null,(0,e.jsxs)(f.k,{justifyContent:"space-between",children:[(0,e.jsxs)(f.k,{minWidth:0,children:[(0,e.jsx)(g.Z,{as:"h1",variant:"alpha",...T,children:E}),R?(0,e.jsx)(i.x,{paddingLeft:4,children:R}):null]}),m]}),$?(0,e.jsx)(g.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:C}):C]})})},71590:(p,h,t)=>{"use strict";t.d(h,{A:()=>d});var e=t(85893),n=t(54863),r=t(16607);const a=(0,n.default)(r.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:i})=>i?"auto 1fr":"1fr"};
`,o=(0,n.default)(r.x)`
  overflow-x: hidden;
`,d=({sideNav:i,children:f})=>(0,e.jsxs)(a,{hasSideNav:Boolean(i),children:[i,(0,e.jsx)(o,{paddingBottom:10,children:f})]})},29824:(p,h,t)=>{"use strict";t.d(h,{r:()=>L});var e=t(85893),n=t(67294),r=t(62577),a=t(73727),o=t(54863),d=t(66362),i=t(10574),f=t(16607);const g=o.default.a`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  pointer-events: ${({disabled:y})=>y?"none":void 0};
  color: ${({disabled:y,theme:c})=>y?c.colors.neutral600:c.colors.primary600};

  svg path {
    transition: fill 150ms ease-out;
    fill: currentColor;
  }

  svg {
    font-size: ${10/16}rem;
  }

  ${i.Z} {
    transition: color 150ms ease-out;
    color: currentColor;
  }

  &:hover {
    color: ${({theme:y})=>y.colors.primary500};
  }

  &:active {
    color: ${({theme:y})=>y.colors.primary700};
  }

  ${d.BF};
`,u=(0,o.default)(f.x)`
  display: flex;
`,L=n.forwardRef(({children:y,href:c,to:m,disabled:R=!1,startIcon:C,endIcon:E,...B},S)=>{const T=c?"_blank":void 0,F=c?"noreferrer noopener":void 0;return(0,e.jsxs)(g,{as:m&&!R?a.NavLink:"a",target:T,rel:F,to:R?void 0:m,href:R?"#":c,disabled:R,ref:S,...B,children:[C&&(0,e.jsx)(u,{as:"span","aria-hidden":!0,paddingRight:2,children:C}),(0,e.jsx)(i.Z,{children:y}),E&&!c&&(0,e.jsx)(u,{as:"span","aria-hidden":!0,paddingLeft:2,children:E}),c&&(0,e.jsx)(u,{as:"span","aria-hidden":!0,paddingLeft:2,children:(0,e.jsx)(r.Z,{})})]})})},40720:(p,h,t)=>{"use strict";t.d(h,{o:()=>o});var e=t(85893),n=t(54863),r=t(16607);const a=(0,n.default)(r.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,o=({labelledBy:d="main-content-title",...i})=>(0,e.jsx)(a,{"aria-labelledby":d,as:"main",id:"main-content",tabIndex:-1,...i})}}]);
