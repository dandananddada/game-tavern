(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[532],{676:function(e,r,t){"use strict";function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}t.d(r,{Z:function(){return n}})},4699:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(2961);function s(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,s=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(l){s=!0,i=l}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}return t}}(e,r)||(0,n.Z)(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},7329:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(676);var s=t(2961);function i(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||(0,s.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2961:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(676);function s(e,r){if(e){if("string"===typeof e)return(0,n.Z)(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?(0,n.Z)(e,r):void 0}}},4546:function(e,r,t){"use strict";t.d(r,{Y:function(){return c}});var n=t(8448),s=t(3992),i=t(7294),a=t(5993),o=t(5893),l=(0,a.Gp)(((e,r)=>{const{Component:t,label:a,description:l,isClearable:c,startContent:u,endContent:d,labelPlacement:m,hasHelper:p,isLabelOutside:f,isLabelOutsideAsPlaceholder:h,shouldLabelBeOutside:x,errorMessage:g,getBaseProps:j,getLabelProps:v,getInputProps:b,getInnerWrapperProps:y,getInputWrapperProps:O,getMainWrapperProps:w,getHelperWrapperProps:N,getDescriptionProps:P,getErrorMessageProps:S,getClearButtonProps:_}=(0,n.G)({...e,ref:r}),C=a?(0,o.jsx)("label",{...v(),children:a}):null,Z=(0,i.useMemo)((()=>c?(0,o.jsx)("span",{..._(),children:d||(0,o.jsx)(s.f,{})}):d),[c,_]),k=(0,i.useMemo)((()=>p?(0,o.jsx)("div",{...N(),children:g?(0,o.jsx)("div",{...S(),children:g}):l?(0,o.jsx)("div",{...P(),children:l}):null}):null),[p,g,l,N,S,P]),D=(0,i.useMemo)((()=>u||Z?(0,o.jsxs)("div",{...y(),children:[u,(0,o.jsx)("input",{...b()}),Z]}):(0,o.jsx)("div",{...y(),children:(0,o.jsx)("input",{...b()})})),[u,Z,b,y]),E=(0,i.useMemo)((()=>x?(0,o.jsxs)("div",{...w(),children:[(0,o.jsxs)("div",{...O(),children:[h?C:null,D]}),k]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{...O(),children:[C,D]}),k]})),[m,k,x,h,C,D,g,l,w,O,S,P]);return(0,o.jsxs)(t,{...j(),children:[f?C:null,E]})}));l.displayName="NextUI.Input";var c=l},4742:function(e,r,t){"use strict";var n=t(5893),s=(t(7294),t(8744));r.Z=function(e){var r=e.containerCls,t=e.lines,i=void 0===t?2:t,a=e.children;return(0,n.jsx)("div",{className:r,children:(0,n.jsx)(s.Z,{lines:i,more:(0,n.jsx)("div",{className:"text-center text-small text-tag-blue mt-3",children:"\u5c55\u5f00"}),less:(0,n.jsx)("div",{className:"text-center text-small text-tag-blue mt-3",children:"\u6536\u8d77"}),children:a})})}},4905:function(e,r,t){"use strict";t.d(r,{pO:function(){return o},W1:function(){return l},aA:function(){return c},dY:function(){return u}});var n=t(6156),s=t(5893);function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var o=function(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,s.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 19.875C16.3492 19.875 19.875 16.3492 19.875 12C19.875 7.65076 16.3492 4.125 12 4.125C7.65076 4.125 4.125 7.65076 4.125 12C4.125 16.3492 7.65076 19.875 12 19.875ZM12 21.375C17.1777 21.375 21.375 17.1777 21.375 12C21.375 6.82233 17.1777 2.625 12 2.625C6.82233 2.625 2.625 6.82233 2.625 12C2.625 17.1777 6.82233 21.375 12 21.375ZM7.5 12C7.5 11.5858 7.83579 11.25 8.25 11.25H11.25V8.25C11.25 7.83579 11.5858 7.5 12 7.5C12.4142 7.5 12.75 7.83579 12.75 8.25V11.25H15.75C16.1642 11.25 16.5 11.5858 16.5 12C16.5 12.4142 16.1642 12.75 15.75 12.75H12.75V15.75C12.75 16.1642 12.4142 16.5 12 16.5C11.5858 16.5 11.25 16.1642 11.25 15.75V12.75H8.25C7.83579 12.75 7.5 12.4142 7.5 12Z",fill:"white"})})},l=function(e){return(0,s.jsxs)("svg",a(a({"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em"},e),{},{children:[(0,s.jsx)("path",{d:"M11.5 21C16.7467 21 21 16.7467 21 11.5C21 6.25329 16.7467 2 11.5 2C6.25329 2 2 6.25329 2 11.5C2 16.7467 6.25329 21 11.5 21Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M22 22L20 20",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})]}))},c=function(e){return(0,s.jsx)("svg",{t:"1702462580040",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4458",id:"mx_n_1702462580040",width:"200",height:"200",children:(0,s.jsx)("path",{d:"M398.336 682.96704C258.68288 695.33696 184.32 724.74624 184.32 778.24a61.44 61.44 0 0 1-122.88 0c0-186.1632 110.14144-314.61376 330.4448-385.4336 34.75456-11.1616 90.95168-24.00256 168.61184-38.52288A40.96 40.96 0 0 0 593.92 314.01984v-107.52C593.92 194.2528 603.93472 184.32 616.28416 184.32c5.46816 0 10.77248 1.98656 14.848 5.61152L940.032 462.27456a66.1504 66.1504 0 0 1 0 99.45088L631.13216 834.06848c-9.216 8.15104-23.3472 7.33184-31.55968-1.8432a22.07744 22.07744 0 0 1-5.65248-14.7456v-99.9424a40.96 40.96 0 0 0-41.82016-40.93952c-71.4752 1.49504-122.71616 3.60448-153.76384 6.3488z","p-id":"4459",fill:"#ffffff"})})},u=function(e){return(0,s.jsx)("svg",{t:"1702462611040",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4322",width:"200",height:"200",children:(0,s.jsx)("path",{d:"M356.12672 870.13376A105.96352 105.96352 0 0 1 280.69888 901.12l-121.56928-0.49152a35.96288 35.96288 0 0 1-35.75808-35.75808L122.88 743.30112a105.96352 105.96352 0 0 1 30.98624-75.42784L672.0512 146.26816a79.11424 79.11424 0 0 1 111.90272-0.43008l94.0032 94.0032a79.11424 79.11424 0 0 1 0 111.88224l-521.8304 518.41024zM752.78336 368.64L819.2 304.27136 719.72864 204.8 655.36 271.21664 752.78336 368.64zM298.72128 134.88128L430.08 266.24l-163.84 163.84-131.35872-131.35872a40.96 40.96 0 0 1 0-57.93792l105.90208-105.90208a40.96 40.96 0 0 1 57.93792 0z m426.55744 754.23744L593.92 757.76l163.84-163.84 131.35872 131.35872a40.96 40.96 0 0 1 0 57.93792l-105.90208 105.90208a40.96 40.96 0 0 1-57.93792 0z","p-id":"4323",fill:"#ffffff"})})}},8397:function(e,r,t){"use strict";t.d(r,{Z:function(){return u}});var n=t(5893),s=t(4669),i=t.n(s),a=t(486),o=t(6486),l=(t(9150),t(844)),c=t.n(l);function u(e){var r=e.score,t=e.showAverage,s=void 0!==t&&t;if(!r)return null;var l={art:"\u7f8e\u672f ".concat(r.art||""),music:"\u97f3\u4e50 ".concat(r.music||""),story:"\u6545\u4e8b ".concat(r.story||""),creativity:"\u521b\u65b0 ".concat(r.creativity||""),gameplay:"\u6e38\u620f\u6027 ".concat(r.gameplay||"")},u=[{data:{art:+r.art/10,music:+r.music/10,story:+r.story/10,creativity:+r.creativity/10,gameplay:+r.gameplay/10},meta:{color:"blue"}}],d={scales:5,dots:!0,captionMargin:18,shapeProps:function(){return{className:"fill-[#00B2FF3a] stroke-[#00B2FF] stroke-1/2"}},scaleProps:function(){return{fill:"none",className:"stroke-[#4D4D4D] stroke-1/2"}},dotProps:function(){return{className:"".concat(c().dot," fill-[#f00] stroke-[#f00] stroke-1/2")}},captionProps:function(){return{className:"fill-[#D7D7D7] text-sm",textAnchor:"middle",fontSize:12}}};return(0,n.jsxs)("div",{className:"flex justify-center ".concat(s?"items-end":"items-center"," "),children:[(0,n.jsx)(i(),{captions:l,data:u,size:250,options:d}),s&&(0,n.jsx)(a.z,{size:"small",className:"mb-4",children:(0,o.mean)(Object.values(r))})]})}},4424:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSP:function(){return X},default:function(){return Q}});var n=t(5893),s=t(7329),i=t(7757),a=t.n(i),o=t(6156),l=t(2137),c=t(7294),u=t(1664),d=t(9219),m=t(5831),p=t(7255),f=t(242),h=t(6258),x=t(381),g=t.n(x),j=t(6486),v=t(4377),b=t(2519),y=t(1833),O=t(8397),w=t(4699),N=t(770),P=t(5010),S=t(3772);function _(e,r=[]){const t=(0,c.useRef)(e);return(0,S.G)((()=>{t.current=e})),(0,c.useCallback)(((...e)=>{var r;return null==(r=t.current)?void 0:r.call(t,...e)}),r)}function C(e={}){const{id:r,defaultOpen:t,isOpen:n,onClose:s,onOpen:i,onChange:a=(()=>{})}=e,o=_(i),l=_(s),[u,d]=(0,P.zk)(n,t||!1,a),m=(0,c.useId)(),p=r||m,f=void 0!==n,h=(0,c.useCallback)((()=>{f||d(!1),null==l||l()}),[f,l]),x=(0,c.useCallback)((()=>{f||d(!0),null==o||o()}),[f,o]),g=(0,c.useCallback)((()=>{(u?h:x)()}),[u,x,h]);return{isOpen:!!u,onOpen:x,onClose:h,onOpenChange:g,isControlled:f,getButtonProps:(e={})=>({...e,"aria-expanded":u,"aria-controls":p,onClick:(0,N.tS)(e.onClick,g)}),getDisclosureProps:(e={})=>({...e,hidden:!u,id:p})}}var Z=t(3706),k=t(5989),D=t(8703),E=t(4345),A=t(4546),L=t(7970),F=t(2439),I=t(883);function M(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function R(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?M(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var z=function(e){var r,t=e.isOpen,s=void 0!==t&&t,i=e.onClose,a=e.afterLogin,o=e.onRegist,l=C().onOpen,u=(0,c.useState)(s),d=u[0],p=u[1],f=c.useState("inside"),h=(0,w.Z)(f,1)[0],x=(0,F.cI)(),g=x.reset,j=x.register,v=x.handleSubmit,b=x.formState.errors,y=x.setError;return(0,c.useEffect)((function(){s&&(g(),l()),p(s)}),[s]),(0,n.jsx)(Z.R,{isOpen:d,onOpenChange:p,onClose:i,scrollBehavior:h,x2:!0,children:(0,n.jsxs)(k.A,{children:[(0,n.jsx)(D.k,{className:"flex flex-col gap-1",children:"\u767b\u5f55"}),(0,n.jsxs)("form",{onSubmit:v((function(e){(0,I.Io)("/auth/local",{},{method:"POST",body:JSON.stringify(e)}).then((function(e){e.jwt&&(a(e.jwt,e.user),i())})).catch((function(e){y("password",{type:"custom",message:"\u5bc6\u7801\u9519\u8bef"})}))})),children:[(0,n.jsxs)(E.I,{children:[(0,n.jsx)(A.Y,R(R({},j("identifier")),{},{type:"email",label:"\u8d26\u53f7"})),(0,n.jsx)(A.Y,R(R({},j("password")),{},{type:"password",label:"\u5bc6\u7801",errorMessage:(null===b||void 0===b||null===(r=b.password)||void 0===r?void 0:r.message)||""}))]}),(0,n.jsxs)(L.R,{children:[(0,n.jsx)(m.A,{type:"submit",color:"primary",children:"\u767b\u5f55"}),(0,n.jsx)(m.A,{color:"default",variant:"light",onPress:function(){i(),o()},children:"\u6ce8\u518c"}),(0,n.jsx)(m.A,{color:"default",variant:"light",onPress:i,children:"\u53d6\u6d88"})]})]})]})})};function B(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function T(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?B(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var G=function(e){var r,t,s,i=e.isOpen,a=void 0!==i&&i,o=e.onClose,l=e.afterRegister,u=C().onOpen,d=(0,c.useState)(a),p=d[0],f=d[1],h=c.useState("inside"),x=(0,w.Z)(h,1)[0],g=(0,F.cI)(),j=g.reset,v=g.register,b=g.handleSubmit,y=g.formState.errors,O=g.setError;return(0,c.useEffect)((function(){a&&(j(),u()),f(a)}),[a]),(0,n.jsx)(Z.R,{isOpen:p,onOpenChange:f,onClose:o,scrollBehavior:x,x2:!0,children:(0,n.jsxs)(k.A,{children:[(0,n.jsx)(D.k,{className:"flex flex-col gap-1",children:"\u6ce8\u518c"}),(0,n.jsxs)("form",{onSubmit:b((function(e){(0,I.Io)("/auth/local/register",{},{method:"POST",body:JSON.stringify(e)}).then((function(e){e.jwt&&(l(e.jwt,e.user),o())})).catch((function(e){var r=null===e||void 0===e?void 0:e.error,t=r.details,n=r.message;O("email",{type:"custom",message:n}),null!==t&&void 0!==t&&t.errors.length&&t.errors.forEach((function(e){var r=(0,w.Z)(e.path,1)[0];O(r,{type:"custom",message:e.message})}))}))})),children:[(0,n.jsxs)(E.I,{children:[(0,n.jsx)(A.Y,T(T({},v("email")),{},{isRequired:!0,type:"email",label:"\u8d26\u53f7",description:"\u8f93\u5165\u5e38\u7528\u90ae\u7bb1",errorMessage:null===y||void 0===y||null===(r=y.email)||void 0===r?void 0:r.message})),(0,n.jsx)(A.Y,T(T({},v("username")),{},{isRequired:!0,label:"\u6635\u79f0",errorMessage:null===y||void 0===y||null===(t=y.username)||void 0===t?void 0:t.message})),(0,n.jsx)(A.Y,T(T({},v("password",{min:6})),{},{isRequired:!0,type:"password",label:"\u5bc6\u7801",description:"\u5bc6\u7801\u957f\u5ea6\u4e0d\u5f97\u5c11\u4e8e\u516d\u4f4d",errorMessage:null===y||void 0===y||null===(s=y.password)||void 0===s?void 0:s.message}))]}),(0,n.jsxs)(L.R,{children:[(0,n.jsx)(m.A,{type:"submit",color:"primary",children:"\u6ce8\u518c"}),(0,n.jsx)(m.A,{color:"default",variant:"light",onPress:o,children:"\u53d6\u6d88"})]})]})]})})},Y=t(6623),H=t(4905),V=t(9445),W=t(1552),J=t(4742);function q(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function U(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?q(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var X=!0,Q=(0,f.Pi)((function(e){var r=e.slug,t=V.Z.shouldLogin,i=V.Z.shouldRegist,o=W.Z.user,f=W.Z.isLogin,x=(0,c.useState)(),w=x[0],N=x[1],P=(0,c.useState)(),S=P[0],_=P[1],C=(0,c.useState)(!0),Z=C[0],k=C[1],D=function(){var e=(0,l.Z)(a().mark((function e(){var t,n,s,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.EK)("/games/".concat(r));case 2:return n=e.sent,s=n.developers.map((function(e){return e.name})),i=n.publishers.map((function(e){return e.name})),N(U(U({},n),{},{released:null===n||void 0===n||null===(t=n.released)||void 0===t?void 0:t.split("-").join("."),developer:s.join(", "),publisher:i.join(", ")})),e.next=8,E();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,l.Z)(a().mark((function e(){var t,n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.Io)("/scores/game",{game:r});case 2:t=e.sent,n=t.results,s=(0,j.remove)(n,["users_permissions_user.username",null===o||void 0===o?void 0:o.username]),k(!s.length),_(s?s.concat(n):n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){V.Z.update({isLogin:f,shouldLogin:!f}),D()}),[]);var A=function(e){f?V.Z.update("shouldGrade",!0):V.Z.update("shouldLogin",!0),e&&V.Z.update("gameScore",e)},L=function(e,r){h.Z.set("jwt",e,{expires:7}),h.Z.set("user",JSON.stringify(r),{expires:7}),W.Z.login();var t=(0,j.find)(S,["users_permissions_user.username",null===r||void 0===r?void 0:r.username]);k(!t)};return w?(0,n.jsxs)("div",{className:"dark",children:[(0,n.jsx)(z,{isOpen:t,onClose:function(){return V.Z.update("shouldLogin",!1)},onRegist:function(){return V.Z.update("shouldRegist",!0)},afterLogin:L}),(0,n.jsx)(G,{isOpen:i,onClose:function(){return V.Z.update("shouldRegist",!1)},afterRegister:L}),(0,n.jsx)(v.default,{game:w,afterGrade:function(){E(),V.Z.update("shouldGrade",!1),_((0,s.Z)(S)),k(!1)}}),(0,n.jsx)(b.default,{game:w}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 max-w-6xl m-auto",children:[(0,n.jsx)(y.default,{game:w}),(0,n.jsx)("div",{className:"col-span-1 mt-6 lg:mt-0 lg:ml-5 lg:pl-5 lg:border-l-[#4C4A57] lg:border-l-1",children:(0,n.jsxs)("div",{className:"col-span-1",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mx-4 pb-4 border-b-1 border-b-[#4C4A57]",children:[(0,n.jsxs)("p",{className:"text-md",children:[(0,n.jsx)("span",{className:"text-light-black",children:"\u6392\u5e8f\uff1a"}),(0,n.jsx)("span",{children:"\u6700\u65b0"})]}),(0,n.jsx)(m.A,{className:"text-base h-10 px-4 rounded-full bg-button-blue",size:"sm",startContent:(0,n.jsx)(n.Fragment,{children:f?(0,n.jsx)(H.pO,{}):null}),isDisabled:f&&!Z,onPress:A,children:f?"\u6e38\u620f\u8bc4\u5206":"\u767b\u5f55"})]}),(0,n.jsx)("div",{className:"grid grid-cols-1 mt-6",children:(S||[]).map((function(e){var r,t,s;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-between mr-4",children:[(0,n.jsxs)("div",{className:"flex ml-4 lg:col-span-1",children:[(0,n.jsx)(p.E.button,{whileTap:{scale:.8},children:(0,n.jsx)(u.default,{href:"/member/".concat(null===(r=e.users_permissions_user)||void 0===r?void 0:r.email),children:(0,n.jsx)(Y.Z,{user:e.users_permissions_user})},o.id)}),(0,n.jsxs)("div",{className:"ml-2",children:[(0,n.jsx)("div",{className:"text-sm text-white",children:null===(t=e.users_permissions_user)||void 0===t?void 0:t.username}),(0,n.jsx)("div",{className:"text-sm text-light-black",children:g()(e.createdAt).format("YYYY\u5e74MM\u6708DD\u65e5 \u53d1\u8868\u8bc4\u8bba")})]})]}),(null===(s=e.users_permissions_user)||void 0===s?void 0:s.id)===(null===o||void 0===o?void 0:o.id)&&(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(m.A,{isIconOnly:!0,size:"sm",variant:"flat",className:"px-2 py-2 mr-2",onPress:function(){return A(e)},children:(0,n.jsx)(H.dY,{})}),(0,n.jsx)(m.A,{isIconOnly:!0,size:"sm",variant:"flat",className:"px-2 py-2",onPress:function(){return function(e){V.Z.update("shouldShare",!0),V.Z.update("gameScore",e)}(e)},children:(0,n.jsx)(H.aA,{})})]})]}),(0,n.jsxs)("div",{className:"mt-2 flex justify-center items-center lg:col-span-1 lg:justify-end",children:[(0,n.jsx)("span",{className:"text-md text-white",children:"\u7efc\u5408\u8bc4\u5206"}),(0,n.jsx)("div",{className:"text-2xl text-white text-bold bg-apple-green ml-2 px-3 py-1/2 rounded-md",children:(0,j.mean)(Object.values(e.radar_score)).toFixed(1)})]}),(0,n.jsxs)("div",{className:"m-5 pb-6 border-b-1 border-b-[#4C4A57] last:border-b-0",children:[!(0,j.isEmpty)(e.radar_score)&&(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(O.Z,{score:e.radar_score})}),0!==+e.score&&(0,n.jsxs)("div",{className:"text-white text-sm mb-2",children:[(0,n.jsx)("span",{children:"\u4e3b\u89c2\u4f53\u9a8c:  "}),(0,n.jsx)("span",{className:"text-base text-bold",children:e.score.toFixed(1)})]}),e.comment&&(0,n.jsx)(J.Z,{lines:2,containerCls:"whitespace-pre-wrap",children:e.comment})]})]})}))})]})})]})]}):(0,n.jsx)("div",{className:"w-full flex justify-center mt-60",children:(0,n.jsx)(d.c,{size:"lg"})})}))},1833:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return a}});var n=t(5893),s=(t(7294),t(4504)),i=t(4742);function a(e){var r=e.game;return(0,n.jsxs)("div",{className:"col-span-1",children:[(0,n.jsxs)("div",{className:"px-4 ",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"min-w-[130px] h-[160px] mr-4 rounded-[16px] bg-center bg-cover bg-no-repeat",style:{backgroundImage:"url(".concat(r.background_image,")")}}),(0,n.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,n.jsx)("div",{className:"text-left text-white text-xl font-bold",children:r.name}),(0,n.jsxs)("div",{className:"text-xs",children:[r.developer&&(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)("span",{className:"text-light-black",children:"\u5f00\u53d1\uff1a"}),(0,n.jsx)("span",{className:"text-white",children:r.developer})]}),(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)("span",{className:"text-light-black",children:"\u53d1\u884c\uff1a"}),(0,n.jsx)("span",{className:"text-white",children:r.publisher})]})]})]})]}),r.released&&(0,n.jsxs)("div",{className:"text-left text-sm text-light-black mt-3",children:["\u53d1\u552e\u65e5\u671f\uff1a",r.released]}),(0,n.jsx)("div",{className:"flex justify-start mt-2",children:r.stores.map((function(e){var r=e.store;return(0,n.jsx)(s.default,{storeSlug:r.slug,className:"flex  mr-2"})}))}),(0,n.jsx)("div",{className:"text-left text-sm",children:(0,n.jsxs)("div",{className:"mt-3 flex items-center",children:[(0,n.jsx)("div",{className:"mt-2 text-light-black shrink-0",children:"\u7c7b\u578b\uff1a"}),(0,n.jsx)("div",{className:"flex flex-wrap",children:r.genres.map((function(e){var r=e.name;return(0,n.jsx)("span",{className:"px-2 py-1 mr-2 mt-2 text-tag-blue border border-tag-blue",children:r})}))})]})})]}),r.description_raw&&(0,n.jsx)(i.Z,{containerCls:"w-full mt-4 px-4 py-4 bg-back-brown text-[#EEE]",lines:3,children:r.description_raw})]})}},4377:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return F}});var n=t(5893),s=t(6156),i=t(7757),a=t.n(i),o=t(2137),l=t(7294),c=t(242),u=t(6258),d=t(883),m=t(3706),p=t(5989),f=t(8703),h=t(4345),x=t(9303),g=t(7970),j=t(5831),v=t(2439),b=t(381),y=t.n(b),O=t(9469),w=t(7255),N=t(3779),P=t.n(N);function S(e){var r=e.label,t=e.name,s=e.control,i=e.className;return(0,n.jsx)(v.Qr,{control:s,name:t,render:function(e){var t,s=e.field;return(0,n.jsxs)("div",{className:"".concat(P()["rate-container"]," flex flex-col ").concat(i),children:[(0,n.jsxs)("label",{className:"mb-2 text-small",children:[r," ",s.value]}),(0,n.jsx)(O.Z,{stop:10,onChange:s.onChange,initialRating:s.value,fullSymbol:(0,n.jsx)(w.E.button,{whileHover:{scale:1.1},whileTap:{scale:.8},className:"".concat((t=s.value,t<7?"bg-[#FF5959]":t<9?"bg-[#EBFF00]":"bg-[#41FF3E]")," rounded-full  w-7 h-7 border-5 border-double border-black")}),emptySymbol:(0,n.jsx)(w.E.button,{whileHover:{scale:1.1},whileTap:{scale:.8},className:"bg-white rounded-full w-7 h-7 border-5 border-double border-black"})})]})}})}var _=t(7375),C=t(3153);function Z(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function k(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Z(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function D(e){var r=e.label,t=e.name,s=e.control,i=(0,_.Z)(e,["label","name","control"]),a=(0,l.useState)("foreground"),o=a[0],c=a[1],u=function(e){return function(r){var t;c((t=r)<7?"bg-[#FF5959]":t<9?"bg-[#EBFF00]":"bg-[#41FF3E]"),e.onChange(r)}};return(0,n.jsx)(v.Qr,{control:s,name:t,render:function(e){var t=e.field;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(C.L,k({label:r,onChange:u(t),control:s,classNames:{filler:o},value:null===t||void 0===t?void 0:t.value},i))})}})}var E=t(9445);function A(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function L(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?A(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var F=(0,c.Pi)((function(e){var r=e.game,t=e.afterGrade,s=E.Z.shouldGrade,i=E.Z.gameScore,c=(0,v.cI)(),b=c.register,O=c.handleSubmit,w=c.setValue,N=c.control,P=c.formState.errors,_=(0,l.useState)(!1),C=_[0],Z=_[1];(0,l.useEffect)((function(){var e,r,t,n,s;i&&(w("comment",i.comment),w("art",null===(e=i.radar_score)||void 0===e?void 0:e.art),w("music",null===(r=i.radar_score)||void 0===r?void 0:r.music),w("story",null===(t=i.radar_score)||void 0===t?void 0:t.story),w("creativity",null===(n=i.radar_score)||void 0===n?void 0:n.creativity),w("gameplay",null===(s=i.radar_score)||void 0===s?void 0:s.gameplay),w("score",i.score),w("id",i.id))}),[i]);var k=function(){var e=(0,o.Z)(a().mark((function e(n){var s,i,o,l,c,m,p,f,h,x,g,j,v,b,O,w,N;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z(!0),s=n.art,i=n.music,o=n.story,l=n.creativity,c=n.gameplay,m=n.score,p=n.comment,f=r.slug,h=r.name,x=r.released,g=r.background_image,j=r.stores,v=r.genres,b=r.description,O=r.publisher,w=r.developer,N=u.Z.get("jwt"),isNaN(n.id)){e.next=11;break}return e.next=7,(0,d.Io)("/scores/".concat(n.id),{},{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N)},body:JSON.stringify({data:{id:n.id,score:m,comment:p,radar_score:{art:s,music:i,story:o,creativity:l,gameplay:c}}})});case 7:e.sent.data.id&&(t(n),Z(!1)),e.next=15;break;case 11:return e.next=13,(0,d.Io)("/score/grade",{},{method:"POST",headers:{Authorization:"Bearer ".concat(N)},body:JSON.stringify({score:m,comment:p,radar_score:{art:s,music:i,story:o,creativity:l,gameplay:c},game:{slug:f,name:h,description:b,background_image:g,publisher:O,developer:w,released:y()(x),platforms:j.map((function(e){return e.id})),genres:v.map((function(e){return e.id}))}})});case 13:e.sent.score&&(t({score:m,comment:p,radar_score:{art:s,music:i,story:o,creativity:l,gameplay:c}}),Z(!1));case 15:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsx)(m.R,{isOpen:s,onOpenChange:function(e){E.Z.update("shouldGrade",e)},scrollBehavior:"inside",children:(0,n.jsx)(v.l0,{control:N,onSubmit:O(k),render:function(e){var r=e.submit;return(0,n.jsx)(p.A,{children:function(e){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.k,{className:"flex flex-col gap-1",children:"\u63d0\u4ea4\u8bc4\u5206"}),(0,n.jsxs)(h.I,{children:[(0,n.jsx)(S,L(L({label:"\u7f8e\u672f"},b("art",{required:!1})),{},{control:N})),(0,n.jsx)(S,{label:"\u97f3\u4e50",name:"music",control:N,className:"mt-4"}),(0,n.jsx)(S,{label:"\u53d9\u4e8b",name:"story",control:N,className:"mt-4"}),(0,n.jsx)(S,{label:"\u521b\u65b0",name:"creativity",control:N,className:"mt-4"}),(0,n.jsx)(S,{label:"\u6e38\u620f\u6027",name:"gameplay",control:N,className:"mt-4"}),(0,n.jsx)(D,{name:"score",label:"\u7efc\u5408\u4f53\u9a8c",isRequired:!0,color:"foreground",hideThumb:!0,step:.2,maxValue:10,minValue:0,defaultValue:0,control:N,errorMessage:P.score?"\u8bc4\u5206\u5728 0 - 10 \u4e4b\u95f4\uff0c\u652f\u6301\u4e00\u4f4d\u5c0f\u6570":"",className:"max-w-md mt-4"}),(0,n.jsx)(x.Y,L(L({},b("comment")),{},{label:"\u8bc4\u4ef7"}))]}),(0,n.jsxs)(g.R,{children:[(0,n.jsx)(j.A,{type:"submit",onPress:r,isLoading:C,children:"\u63d0\u4ea4\u8bc4\u5206"}),(0,n.jsx)(j.A,{color:"default",variant:"light",onPress:e,children:"\u53d6\u6d88"})]})]})}})}})})})}))},2519:function(e,r,t){"use strict";t.r(r);var n=t(5893),s=t(7294),i=t(242),a=t(6486),o=t(9306),l=t.n(o),c=t(3706),u=t(5989),d=t(8703),m=t(4345),p=t(7970),f=t(5831),h=t(4504),x=t(8397),g=t(6623),j=t(9445);r.default=(0,i.Pi)((function(e){var r=e.game,t=j.Z.shouldShare,i=j.Z.gameScore,o=(0,s.useRef)(null),v=(0,s.useState)(!1),b=v[0],y=v[1],O=function(){var e=o.current;y(!0),l().toPng(e,{width:2*e.clientWidth,height:2*e.clientHeight,style:{transform:"scale(2)",transformOrigin:"top left"}}).then((function(){l().toPng(e,{width:2*e.clientWidth,height:2*e.clientHeight,style:{transform:"scale(2)",transformOrigin:"top left"}}).then((function(e){var t=document.createElement("a");t.download="".concat(r.name,".png"),t.href=e,t.click(),y(!1)}))}))},w={background:"linear-gradient(0deg, #201F25 9.36%, rgba(32, 31, 37, 0.00) 100%)"};return(0,n.jsx)(c.R,{size:"full",isOpen:t,onOpenChange:function(e){j.Z.update("shouldShare",e)},scrollBehavior:"inside",children:(0,n.jsx)(u.A,{children:function(e){var t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.k,{className:"flex flex-col gap-1",children:"\u5206\u4eab\u8bc4\u5206"}),(0,n.jsx)(m.I,{children:(0,n.jsx)("div",{className:"bg-[#201F25]",ref:o,children:(0,n.jsx)("div",{className:"bg-center bg-cover bg-no-repeat",style:{backgroundImage:"url(/api/image-proxy?imageUrl=".concat(r.background_image,")")},children:(0,n.jsxs)("div",{className:"text-center pt-[220px]",style:w,children:[(0,n.jsx)("div",{className:"text-white text-2xl font-bold",children:r.name}),(0,n.jsxs)("div",{className:"flex justify-center items-center mt-1/2 leading-4",children:[r.stores.map((function(e){var r=e.store;return(0,n.jsx)(h.default,{storeSlug:r.slug,className:"flex mr-1/2 scale-75"})})),(0,n.jsxs)("div",{className:"ml-1 text-left text-sm text-[#DDD]",children:["\u53d1\u552e\u65e5\u671f\uff1a",r.released]})]}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)("span",{className:"text-[#DDD]",children:"\u5f00\u53d1\uff1a"}),(0,n.jsx)("span",{className:"text-white",children:r.developer})]}),(0,n.jsxs)("div",{className:"mt-1",children:[(0,n.jsx)("span",{className:"text-[#DDD]",children:"\u53d1\u884c\uff1a"}),(0,n.jsx)("span",{className:"text-white",children:r.publisher})]})]}),(0,n.jsxs)("div",{className:"w-32 m-auto my-6 py-2 rounded-md bg-[#201f25]/80",children:[(0,n.jsx)("span",{className:"text-md text-[#D7D7D7]",children:"\u7efc\u5408\u8bc4\u5206"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-[#2CFF28]",children:(0,a.mean)(Object.values(i.radar_score)).toFixed(1)})]}),(0,n.jsx)(x.Z,{score:i.radar_score}),(0,n.jsxs)("div",{className:"flex justify-center items-center text-sm mt-8 mb-8",children:[(0,n.jsx)(g.Z,{user:i.users_permissions_user,size:"sm"}),(0,n.jsx)("span",{className:"ml-2 text-white",children:null===(t=i.users_permissions_user)||void 0===t?void 0:t.username}),(0,n.jsx)("span",{className:"ml-2 text-[#DDD]",children:"\u5206\u4eab\u4e86 TA \u7684\u8bc4\u5206"})]})]})})})}),(0,n.jsxs)(p.R,{children:[(0,n.jsx)(f.A,{onPress:O,isLoading:b,children:"\u5206\u4eab"}),(0,n.jsx)(f.A,{color:"default",variant:"light",onPress:e,children:"\u53d6\u6d88"})]})]})}})})}))},4504:function(e,r,t){"use strict";t.r(r);var n=t(5893),s=t(5940),i=function(e){var r=e.storeSlug;return["playstation-store"].includes(r)?(0,n.jsx)(s.PS,{}):"nintendo"===r?(0,n.jsx)(s.NS,{}):"steam"===r?(0,n.jsx)(s.Steam,{}):"xbox-store"===r?(0,n.jsx)(s.Xbox,{}):"epic-games"===r?(0,n.jsx)(s.Epic,{}):"google-play"===r?(0,n.jsx)(s.Google,{}):"apple-appstore"===r?(0,n.jsx)(s.Apple,{}):null};r.default=function(e){var r=e.storeSlug,t=e.className;return["playstation-store","nintendo","xbox-store","steam","epic-games","google-play","apple-appstore"].includes(r)?(0,n.jsx)("div",{className:t,children:(0,n.jsx)(i,{storeSlug:r})}):null}},9445:function(e,r,t){"use strict";var n=t(8949),s=(0,n.ky)({_isLogin:!1,_shouldLogin:!1,_shouldRegist:!1,_shouldGrade:!1,_shouldShare:!1,_gameScore:{},get isLogin(){return this._isLogin},get shouldLogin(){return this._shouldLogin},get shouldRegist(){return this._shouldRegist},get shouldGrade(){return this._shouldGrade},get shouldShare(){return this._shouldShare},get gameScore(){return this._gameScore},update:function(e,r){if("string"===typeof e)s["_".concat(e)]=r,console.log(s);else for(var t in e)console.log(t),s["_".concat(t)]=e[t]}},{update:n.aD.bound});r.Z=s},1552:function(e,r,t){"use strict";var n=t(8949),s=t(6258),i=(0,n.ky)({_isLogin:![void 0,null,""].includes(s.Z.get("jwt")),get user(){try{return JSON.parse(s.Z.get("user")||"{}")}catch(e){return null}},get isLogin(){return this._isLogin},login:function(){this._isLogin=!0}},{update:n.aD.bound});r.Z=i},3092:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game/[slug]",function(){return t(4424)}])},844:function(e){e.exports={dot:"radar_dot__1xVHi"}},3779:function(e){e.exports={"rate-container":"rating_rate-container__2N1SJ"}}},function(e){e.O(0,[774,885,662,661,121,635,514,169,744,549,538,75,888,179],(function(){return r=3092,e(e.s=r);var r}));var r=e.O();_N_E=r}]);