(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[942],{883:function(e,r,t){"use strict";t.d(r,{Io:function(){return p},EK:function(){return m}});var n=t(7757),o=t.n(n),a=t(6156),c=t(2137),s=t(129),i=t.n(s),l=t(4155);function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){(0,a.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(l.env.NEXT_PUBLIC_STRAPI_API_URL||"http://localhost:1337").concat(e)}function p(e){return b.apply(this,arguments)}function b(){return(b=(0,c.Z)(o().mark((function e(r){var t,n,a,c,s,l,u,p=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>1&&void 0!==p[1]?p[1]:{},n=p.length>2&&void 0!==p[2]?p[2]:{},a=f({headers:{"Content-Type":"application/json"}},n),c=i().stringify(t),s="".concat(d("/api".concat(r).concat(c?"?".concat(c):""))),e.next=7,fetch(s,a);case 7:if((l=e.sent).ok){e.next=11;break}throw console.error(l.statusText),new Error("An error occured please try again");case 11:return e.next=13,l.json();case 13:return u=e.sent,e.abrupt("return",u);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,r){return h.apply(this,arguments)}function h(){return(h=(0,c.Z)(o().mark((function e(r,t){var n,a,c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.rawg.io/api".concat(r),a=i().stringify(f(f({},t),{},{key:"ff4e06ab161444f79981aa36afe81f21"})),e.next=4,fetch([n,a].join("?"),{headers:{"Content-Type":"application/json"}});case 4:return c=e.sent,e.next=7,c.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2087:function(e,r,t){"use strict";t.r(r);var n=t(5893),o=t(6156),a=t(7757),c=t.n(a),s=t(2137),i=(t(7294),t(242)),l=t(6258),u=t(883),f=t(1703),d=t(5989),p=t(8703),b=t(4345),m=t(6367),h=t(3751),g=t(8052),y=t(4240),j=t(7970),v=t(4322),x=t(2439),O=t(381),w=t.n(O),_=t(9480),P=t(9445);function k(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function N(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?k(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.default=(0,i.Pi)((function(e){var r=e.game,t=e.afterGrade,o=P.Z.shouldGrade,a=(0,x.cI)(),i=a.register,O=a.handleSubmit,k=a.control,E=a.formState.errors,S=function(){var e=(0,s.Z)(c().mark((function e(n){var o,a,s,i,f,d,p,b,m,h,g,y,j,v,x,O,_;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.art,a=n.music,s=n.story,i=n.creativity,f=n.gameplay,d=n.score,p=n.comment,b=r.slug,m=r.name,h=r.released,g=r.background_image,y=r.stores,j=r.genres,v=r.description,x=r.publisher,O=r.developer,_=l.Z.get("jwt"),e.next=5,(0,u.Io)("/score/grade",{},{method:"POST",headers:{Authorization:"Bearer ".concat(_)},body:JSON.stringify({score:d,comment:p,radar_score:{art:o,music:a,story:s,creativity:i,gameplay:f},game:{slug:b,name:m,description:v,background_image:g,publisher:x,developer:O,released:w()(h),platforms:y.map((function(e){return e.id})),genres:j.map((function(e){return e.id}))}})});case 5:e.sent.score&&t({score:d,comment:p,radar_score:{art:o,music:a,story:s,creativity:i,gameplay:f}});case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return console.log(E,"..."),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"text-right m-4"}),(0,n.jsx)(f.R,{isOpen:o,onOpenChange:function(e){P.Z.update("shouldGrade",e)},scrollBehavior:"inside",children:(0,n.jsx)(x.l0,{control:k,onSubmit:O(S),render:function(e){var r=e.submit;return(0,n.jsx)(d.A,{children:function(e){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.k,{className:"flex flex-col gap-1",children:"\u63d0\u4ea4\u8bc4\u5206"}),(0,n.jsxs)(b.I,{children:[(0,n.jsx)(m.Y,N(N({},i("score",{min:0,max:10})),{},{type:"number",label:"\u8bc4\u5206",description:"\u8bc4\u5206\u5728 0 - 10 \u4e4b\u95f4\uff0c\u652f\u6301\u4e00\u4f4d\u5c0f\u6570",errorMessage:E.score?"\u8bc4\u5206\u5728 0 - 10 \u4e4b\u95f4\uff0c\u652f\u6301\u4e00\u4f4d\u5c0f\u6570":""})),(0,n.jsx)(h.Y,N(N({},i("comment")),{},{label:"\u8bc4\u4ef7"})),(0,n.jsx)(g.d,{children:(0,n.jsxs)(y.G,{title:(0,n.jsx)("span",{className:"text-base",children:"\u66f4\u591a"}),children:[(0,n.jsx)(_.default,{label:"\u7f8e\u672f",name:"art",control:k}),(0,n.jsx)(_.default,{label:"\u97f3\u4e50",name:"music",control:k,className:"mt-4"}),(0,n.jsx)(_.default,{label:"\u53d9\u4e8b",name:"story",control:k,className:"mt-4"}),(0,n.jsx)(_.default,{label:"\u521b\u65b0",name:"creativity",control:k,className:"mt-4"}),(0,n.jsx)(_.default,{label:"\u6e38\u620f\u6027",name:"gameplay",control:k,className:"mt-4"})]})})]}),(0,n.jsxs)(j.R,{children:[(0,n.jsx)(v.A,{type:"submit",onPress:r,children:"\u63d0\u4ea4\u8bc4\u5206"}),(0,n.jsx)(v.A,{color:"default",variant:"light",onPress:e,children:"\u53d6\u6d88"})]})]})}})}})})]})}))},9480:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var n=t(5893),o=t(2439),a=t(9469);function c(e){var r=e.label,t=e.name,c=e.control,s=e.className;return(0,n.jsx)(o.Qr,{control:c,name:t,render:function(e){var t,o=e.field;return(0,n.jsxs)("div",{className:"flex flex-col ".concat(s),children:[(0,n.jsxs)("label",{className:"mb-2",children:[r,"  ",o.value," "]}),(0,n.jsx)(a.Z,{stop:10,onChange:o.onChange,initialRating:o.value,fullSymbol:["inline-block ".concat((t=o.value,t<7?"bg-[#FF5959]":t<9?"bg-[#EBFF00]":"bg-[#41FF3E]")," rounded-full  w-7 h-7 border-5 border-double border-black")],emptySymbol:["inline-block bg-white rounded-full  w-7 h-7 border-5 border-double border-black"]})]})}})}},9445:function(e,r,t){"use strict";var n=t(8949),o=(0,n.ky)({_isLogin:!1,_shouldLogin:!1,_shouldGrade:!1,get isLogin(){return this._isLogin},get shouldLogin(){return this._shouldLogin},get shouldGrade(){return this._shouldGrade},update:function(e,r){if("string"===typeof e)o["_".concat(e)]=r,console.log(o);else for(var t in e)console.log(t),o["_".concat(t)]=e[t]}},{update:n.aD.bound});r.Z=o},7606:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game/components/grade",function(){return t(2087)}])},4654:function(){}},function(e){e.O(0,[461,885,242,668,789,774,888,179],(function(){return r=7606,e(e.s=r);var r}));var r=e.O();_N_E=r}]);